(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(21)},17:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(5),i=n(8),s=n(6),o=n(9),c=n(1),l=n.n(c),u=n(11),p=n.n(u),h=(n(17),function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("h1",{className:"title"},l.a.createElement("a",{href:"https://discoverthreejs.com/"},"Discoverthreejs.com")," - Ch 2.2  ")}}]),t}(l.a.Component)),d=n(3),m=n.n(d),f=n(7),v=n(2),g=n(0),b=function(e,t){var n,a,r,i,s;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new g.Lb,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:g.N.LEFT,MIDDLE:g.N.MIDDLE,RIGHT:g.N.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.saveState=function(){o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object.zoom},this.reset=function(){o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(c),o.update(),h=p.NONE},this.update=(n=new g.Lb,a=(new g.ob).setFromUnitVectors(e.up,new g.Lb(0,1,0)),r=a.clone().inverse(),i=new g.Lb,s=new g.ob,function(){var e=o.object.position;return n.copy(e).sub(o.target),n.applyQuaternion(a),m.setFromVector3(n),o.autoRotate&&h===p.NONE&&P(2*Math.PI/60/60*o.autoRotateSpeed),m.theta+=f.theta,m.phi+=f.phi,m.theta=Math.max(o.minAzimuthAngle,Math.min(o.maxAzimuthAngle,m.theta)),m.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=v,m.radius=Math.max(o.minDistance,Math.min(o.maxDistance,m.radius)),o.target.add(b),n.setFromSpherical(m),n.applyQuaternion(r),e.copy(o.target).add(n),o.object.lookAt(o.target),!0===o.enableDamping?(f.theta*=1-o.dampingFactor,f.phi*=1-o.dampingFactor,b.multiplyScalar(1-o.dampingFactor)):(f.set(0,0,0),b.set(0,0,0)),v=1,!!(y||i.distanceToSquared(o.object.position)>d||8*(1-s.dot(o.object.quaternion))>d)&&(o.dispatchEvent(c),i.copy(o.object.position),s.copy(o.object.quaternion),y=!1,!0)}),this.dispose=function(){o.domElement.removeEventListener("contextmenu",Y,!1),o.domElement.removeEventListener("mousedown",k,!1),o.domElement.removeEventListener("wheel",K,!1),o.domElement.removeEventListener("touchstart",z,!1),o.domElement.removeEventListener("touchend",X,!1),o.domElement.removeEventListener("touchmove",V,!1),document.removeEventListener("mousemove",F,!1),document.removeEventListener("mouseup",G,!1),window.removeEventListener("keydown",B,!1)};var o=this,c={type:"change"},l={type:"start"},u={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},h=p.NONE,d=1e-6,m=new g.zb,f=new g.zb,v=1,b=new g.Lb,y=!1,E=new g.Kb,T=new g.Kb,S=new g.Kb,M=new g.Kb,R=new g.Kb,w=new g.Kb,L=new g.Kb,x=new g.Kb,A=new g.Kb;function _(){return Math.pow(.95,o.zoomSpeed)}function P(e){f.theta-=e}function O(e){f.phi-=e}var C,U=(C=new g.Lb,function(e,t){C.setFromMatrixColumn(t,0),C.multiplyScalar(-e),b.add(C)}),D=function(){var e=new g.Lb;return function(t,n){!0===o.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(o.object.up,e)),e.multiplyScalar(t),b.add(e)}}(),H=function(){var e=new g.Lb;return function(t,n){var a=o.domElement===document?o.domElement.body:o.domElement;if(o.object.isPerspectiveCamera){var r=o.object.position;e.copy(r).sub(o.target);var i=e.length();i*=Math.tan(o.object.fov/2*Math.PI/180),U(2*t*i/a.clientHeight,o.object.matrix),D(2*n*i/a.clientHeight,o.object.matrix)}else o.object.isOrthographicCamera?(U(t*(o.object.right-o.object.left)/o.object.zoom/a.clientWidth,o.object.matrix),D(n*(o.object.top-o.object.bottom)/o.object.zoom/a.clientHeight,o.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),o.enablePan=!1)}}();function I(e){o.object.isPerspectiveCamera?v/=e:o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom*e)),o.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function N(e){o.object.isPerspectiveCamera?v*=e:o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/e)),o.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function j(e){M.set(e.clientX,e.clientY)}function k(e){if(!1!==o.enabled){switch(e.preventDefault(),e.button){case o.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===o.enablePan)return;j(e),h=p.PAN}else{if(!1===o.enableRotate)return;!function(e){E.set(e.clientX,e.clientY)}(e),h=p.ROTATE}break;case o.mouseButtons.MIDDLE:if(!1===o.enableZoom)return;!function(e){L.set(e.clientX,e.clientY)}(e),h=p.DOLLY;break;case o.mouseButtons.RIGHT:if(!1===o.enablePan)return;j(e),h=p.PAN}h!==p.NONE&&(document.addEventListener("mousemove",F,!1),document.addEventListener("mouseup",G,!1),o.dispatchEvent(l))}}function F(e){if(!1!==o.enabled)switch(e.preventDefault(),h){case p.ROTATE:if(!1===o.enableRotate)return;!function(e){T.set(e.clientX,e.clientY),S.subVectors(T,E).multiplyScalar(o.rotateSpeed);var t=o.domElement===document?o.domElement.body:o.domElement;P(2*Math.PI*S.x/t.clientHeight),O(2*Math.PI*S.y/t.clientHeight),E.copy(T),o.update()}(e);break;case p.DOLLY:if(!1===o.enableZoom)return;!function(e){x.set(e.clientX,e.clientY),A.subVectors(x,L),A.y>0?I(_()):A.y<0&&N(_()),L.copy(x),o.update()}(e);break;case p.PAN:if(!1===o.enablePan)return;!function(e){R.set(e.clientX,e.clientY),w.subVectors(R,M).multiplyScalar(o.panSpeed),H(w.x,w.y),M.copy(R),o.update()}(e)}}function G(e){!1!==o.enabled&&(document.removeEventListener("mousemove",F,!1),document.removeEventListener("mouseup",G,!1),o.dispatchEvent(u),h=p.NONE)}function K(e){!1===o.enabled||!1===o.enableZoom||h!==p.NONE&&h!==p.ROTATE||(e.preventDefault(),e.stopPropagation(),o.dispatchEvent(l),function(e){e.deltaY<0?N(_()):e.deltaY>0&&I(_()),o.update()}(e),o.dispatchEvent(u))}function B(e){!1!==o.enabled&&!1!==o.enableKeys&&!1!==o.enablePan&&function(e){switch(e.keyCode){case o.keys.UP:H(0,o.keyPanSpeed),o.update();break;case o.keys.BOTTOM:H(0,-o.keyPanSpeed),o.update();break;case o.keys.LEFT:H(o.keyPanSpeed,0),o.update();break;case o.keys.RIGHT:H(-o.keyPanSpeed,0),o.update()}}(e)}function z(e){if(!1!==o.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===o.enableRotate)return;!function(e){E.set(e.touches[0].pageX,e.touches[0].pageY)}(e),h=p.TOUCH_ROTATE;break;case 2:if(!1===o.enableZoom&&!1===o.enablePan)return;!function(e){if(o.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);L.set(0,a)}if(o.enablePan){var r=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);M.set(r,i)}}(e),h=p.TOUCH_DOLLY_PAN;break;default:h=p.NONE}h!==p.NONE&&o.dispatchEvent(l)}}function V(e){if(!1!==o.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===o.enableRotate)return;if(h!==p.TOUCH_ROTATE)return;!function(e){T.set(e.touches[0].pageX,e.touches[0].pageY),S.subVectors(T,E).multiplyScalar(o.rotateSpeed);var t=o.domElement===document?o.domElement.body:o.domElement;P(2*Math.PI*S.x/t.clientHeight),O(2*Math.PI*S.y/t.clientHeight),E.copy(T),o.update()}(e);break;case 2:if(!1===o.enableZoom&&!1===o.enablePan)return;if(h!==p.TOUCH_DOLLY_PAN)return;!function(e){if(o.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);x.set(0,a),A.set(0,Math.pow(x.y/L.y,o.zoomSpeed)),I(A.y),L.copy(x)}if(o.enablePan){var r=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);R.set(r,i),w.subVectors(R,M).multiplyScalar(o.panSpeed),H(w.x,w.y),M.copy(R)}o.update()}(e);break;default:h=p.NONE}}function X(e){!1!==o.enabled&&(o.dispatchEvent(u),h=p.NONE)}function Y(e){!1!==o.enabled&&e.preventDefault()}o.domElement.addEventListener("contextmenu",Y,!1),o.domElement.addEventListener("mousedown",k,!1),o.domElement.addEventListener("wheel",K,!1),o.domElement.addEventListener("touchstart",z,!1),o.domElement.addEventListener("touchend",X,!1),o.domElement.addEventListener("touchmove",V,!1),window.addEventListener("keydown",B,!1),this.update()};(b.prototype=Object.create(g.r.prototype)).constructor=b,Object.defineProperties(b.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});var y=function(){function e(t){Object(a.a)(this,e),t=t||"#container",this.container=document.querySelector(t),this.container?(this.scene=new g.ub,this.clock=new g.j,this.running=!1,this.alpha=!1,this.antialias=!0,this.powerPreference="high-performance",this.stencil=!1,this.gammaFactor=2.2,this.gammaOutput=!0,this.physicallyCorrectLights=!0,this.autoResize=!0,this.maxPixelRatio=1/0,this.controlsAutoUpdate=!0,this.onUpdate=null,this.onResize=null,this.showStats=!1):console.error("Couldn't find the container element: ".concat(t))}return Object(r.a)(e,[{key:"init",value:function(){var e=this;this.initCamera(),this.initControls(),this.initRenderer(),this.initStats(),this.autoResize&&window.addEventListener("resize",function(){return e.onWindowResize()})}},{key:"initCamera",value:function(){this.camera||(this.camera=new g.jb(35,this.container.clientWidth/this.container.clientHeight,1,1e3))}},{key:"initControls",value:function(){this.controls||(this.controls=new b(this.camera,this.container),this.controls.enableDamping=!0)}},{key:"initRenderer",value:function(){this.renderer||(this.renderer=new g.Pb({powerPreference:this.powerPreference,alpha:this.alpha,antialias:this.antialias,stencil:this.stencil}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,this.maxPixelRatio)),this.renderer.gammaFactor=this.gammaFactor,this.renderer.gammaOutput=this.gammaOutput,this.renderer.physicallyCorrectLights=this.physicallyCorrectLights,this.renderer.domElement.addEventListener("touchstart",function(e){return e.preventDefault()}),this.container.appendChild(this.renderer.domElement))}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"update",value:function(){var e=this.clock.getDelta();this.controlsAutoUpdate&&this.controls&&this.controls.update&&this.controls.update(e),this.scene.traverse(function(t){t.userData.onUpdate&&t.userData.onUpdate(e)}),this.onUpdate&&this.onUpdate(e)}},{key:"start",value:function(){var e=this;this.clock.getDelta(),this.renderer.setAnimationLoop(function(){e.stats&&e.stats.begin(),e.update(),e.render(),e.stats&&e.stats.end()}),this.running=!0}},{key:"stop",value:function(){this.renderer.setAnimationLoop(null),this.running=!1}},{key:"onWindowResize",value:function(){this.autoResize&&(this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,this.maxPixelRatio)),this.renderer.render(this.scene,this.camera),this.onResize&&this.onResize())}},{key:"initStats",value:function(){this.showStats&&Stats&&(this.stats=new Stats,this.container.appendChild(this.stats.dom))}}]),e}();var E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return{load:function(){var n=Object(f.a)(m.a.mark(function n(a){return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(n,r){e.load(a,n,function(e){return t(e)},function(e){r(new Error("Error loading file ".concat(a))),console.error(e)})}));case 1:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()}},T=function(){function e(e){this.manager=void 0!==e?e:g.l,this.dracoLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(e,t,n,a){var r,i=this;r=void 0!==this.resourcePath?this.resourcePath:void 0!==this.path?this.path:g.M.extractUrlBase(e),i.manager.itemStart(e);var s=function(t){a?a(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},o=new g.s(i.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.load(e,function(n){try{i.parse(n,r,function(n){t(n),i.manager.itemEnd(e)},s)}catch(a){s(a)}},n,s)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},parse:function(e,t,o,c){var d,m={};if("string"===typeof e)d=e;else if(g.M.decodeText(new Uint8Array(e,0,4))===s){try{m[n.KHR_BINARY_GLTF]=new l(e)}catch(T){return void(c&&c(T))}d=m[n.KHR_BINARY_GLTF].content}else d=g.M.decodeText(new Uint8Array(e));var f=JSON.parse(d);if(void 0===f.asset||f.asset.version[0]<2)c&&c(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(f.extensionsUsed)for(var v=0;v<f.extensionsUsed.length;++v){var b=f.extensionsUsed[v],y=f.extensionsRequired||[];switch(b){case n.KHR_LIGHTS_PUNCTUAL:m[b]=new r(f);break;case n.KHR_MATERIALS_UNLIT:m[b]=new i(f);break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:m[b]=new h(f);break;case n.KHR_DRACO_MESH_COMPRESSION:m[b]=new u(f,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:m[n.MSFT_TEXTURE_DDS]=new a(f);break;case n.KHR_TEXTURE_TRANSFORM:m[n.KHR_TEXTURE_TRANSFORM]=new p(f);break;default:y.indexOf(b)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+b+'".')}}var E=new G(f,m,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});E.parse(function(e,t,n,a,r){var i={scene:e,scenes:t,cameras:n,animations:a,asset:r.asset,parser:E,userData:{}};D(m,i,r),o(i)},c)}}};var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function a(){if(!THREE.DDSLoader)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=new THREE.DDSLoader}function r(e){this.name=n.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[n.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function i(e){this.name=n.KHR_MATERIALS_UNLIT}r.prototype.loadLight=function(e){var t,n=this.lightDefs[e],a=new g.k(16777215);void 0!==n.color&&a.fromArray(n.color);var r=void 0!==n.range?n.range:0;switch(n.type){case"directional":(t=new g.m(a)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new g.kb(a)).distance=r;break;case"spot":(t=new g.Ab(a)).distance=r,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:g.P.PI/4,t.angle=n.spot.outerConeAngle,t.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return t.decay=2,void 0!==n.intensity&&(t.intensity=n.intensity),t.name=n.name||"light_"+e,Promise.resolve(t)},i.prototype.getMaterialType=function(e){return g.T},i.prototype.extendParams=function(e,t,n){var a=[];e.color=new g.k(1,1,1),e.opacity=1;var r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){var i=r.baseColorFactor;e.color.fromArray(i),e.opacity=i[3]}void 0!==r.baseColorTexture&&a.push(n.assignTexture(e,"map",r.baseColorTexture))}return Promise.all(a)};var s="glTF",o=12,c={JSON:1313821514,BIN:5130562};function l(e){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,o);if(this.header={magic:g.M.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==s)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var a=new DataView(e,o),r=0;r<a.byteLength;){var i=a.getUint32(r,!0);r+=4;var l=a.getUint32(r,!0);if(r+=4,l===c.JSON){var u=new Uint8Array(e,o+r,i);this.content=g.M.decodeText(u)}else if(l===c.BIN){var p=o+r;this.body=e.slice(p,p+i)}r+=i}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function u(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,THREE.DRACOLoader.getDecoderModule()}function p(e){this.name=n.KHR_TEXTURE_TRANSFORM}function h(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return g.wb},extendParams:function(e,t,n){var a=t.extensions[this.name],r=g.vb.standard,i=g.Jb.clone(r.uniforms),s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),o=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),c=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),l=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),u=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),p=r.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",o).replace("#include <roughnessmap_fragment>",c).replace("#include <metalnessmap_fragment>",l).replace("#include <lights_physical_fragment>",u);delete i.roughness,delete i.metalness,delete i.roughnessMap,delete i.metalnessMap,i.specular={value:(new g.k).setHex(1118481)},i.glossiness={value:.5},i.specularMap={value:null},i.glossinessMap={value:null},e.vertexShader=r.vertexShader,e.fragmentShader=p,e.uniforms=i,e.defines={STANDARD:""},e.color=new g.k(1,1,1),e.opacity=1;var h=[];if(Array.isArray(a.diffuseFactor)){var d=a.diffuseFactor;e.color.fromArray(d),e.opacity=d[3]}if(void 0!==a.diffuseTexture&&h.push(n.assignTexture(e,"map",a.diffuseTexture)),e.emissive=new g.k(0,0,0),e.glossiness=void 0!==a.glossinessFactor?a.glossinessFactor:1,e.specular=new g.k(1,1,1),Array.isArray(a.specularFactor)&&e.specular.fromArray(a.specularFactor),void 0!==a.specularGlossinessTexture){var m=a.specularGlossinessTexture;h.push(n.assignTexture(e,"glossinessMap",m)),h.push(n.assignTexture(e,"specularMap",m))}return Promise.all(h)},createMaterial:function(e){var t=new g.wb({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,a=0,r=n.length;a<r;a++)t[n[a]]=e[n[a]];return t},refreshUniforms:function(e,t,n,a,r,i){if(!0===r.isGLTFSpecularGlossinessMaterial){var s,o=r.uniforms,c=r.defines;o.opacity.value=r.opacity,o.diffuse.value.copy(r.color),o.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),o.map.value=r.map,o.specularMap.value=r.specularMap,o.alphaMap.value=r.alphaMap,o.lightMap.value=r.lightMap,o.lightMapIntensity.value=r.lightMapIntensity,o.aoMap.value=r.aoMap,o.aoMapIntensity.value=r.aoMapIntensity,r.map?s=r.map:r.specularMap?s=r.specularMap:r.displacementMap?s=r.displacementMap:r.normalMap?s=r.normalMap:r.bumpMap?s=r.bumpMap:r.glossinessMap?s=r.glossinessMap:r.alphaMap?s=r.alphaMap:r.emissiveMap&&(s=r.emissiveMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),o.uvTransform.value.copy(s.matrix)),r.envMap&&(o.envMap.value=r.envMap,o.envMapIntensity.value=r.envMapIntensity,o.flipEnvMap.value=r.envMap.isCubeTexture?-1:1,o.reflectivity.value=r.reflectivity,o.refractionRatio.value=r.refractionRatio,o.maxMipLevel.value=e.properties.get(r.envMap).__maxMipLevel),o.specular.value.copy(r.specular),o.glossiness.value=r.glossiness,o.glossinessMap.value=r.glossinessMap,o.emissiveMap.value=r.emissiveMap,o.bumpMap.value=r.bumpMap,o.normalMap.value=r.normalMap,o.displacementMap.value=r.displacementMap,o.displacementScale.value=r.displacementScale,o.displacementBias.value=r.displacementBias,null!==o.glossinessMap.value&&void 0===c.USE_GLOSSINESSMAP&&(c.USE_GLOSSINESSMAP="",c.USE_ROUGHNESSMAP=""),null===o.glossinessMap.value&&void 0!==c.USE_GLOSSINESSMAP&&(delete c.USE_GLOSSINESSMAP,delete c.USE_ROUGHNESSMAP)}}}}function d(e,t,n,a){g.y.call(this,e,t,n,a)}u.prototype.decodePrimitive=function(e,t){var n=this.json,a=this.dracoLoader,r=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,s={},o={},c={};for(var l in i)l in L&&(s[L[l]]=i[l]);for(l in e.attributes)if(void 0!==L[l]&&void 0!==i[l]){var u=n.accessors[e.attributes[l]],p=S[u.componentType];c[L[l]]=p,o[L[l]]=!0===u.normalized}return t.getDependency("bufferView",r).then(function(e){return new Promise(function(t){a.decodeDracoFile(e,function(e){for(var n in e.attributes){var a=e.attributes[n],r=o[n];void 0!==r&&(a.normalized=r)}t(e)},s,c)})})},p.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},d.prototype=Object.create(g.y.prototype),d.prototype.constructor=d,d.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,a=this.valueSize,r=e*a*3+a,i=0;i!==a;i++)t[i]=n[r+i];return t},d.prototype.beforeStart_=d.prototype.copySampleValue_,d.prototype.afterEnd_=d.prototype.copySampleValue_,d.prototype.interpolate_=function(e,t,n,a){for(var r=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=2*s,c=3*s,l=a-t,u=(n-t)/l,p=u*u,h=p*u,d=e*c,m=d-c,f=-2*h+3*p,v=h-p,g=1-f,b=v-p+u,y=0;y!==s;y++){var E=i[m+y+s],T=i[m+y+o]*l,S=i[d+y+s],M=i[d+y]*l;r[y]=g*E+b*T+f*S+v*M}return r};var m=0,f=1,v=2,b=3,y=4,E=5,T=6,S=(Number,g.Q,g.R,g.Kb,g.Lb,g.Mb,g.Fb,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),M={9728:g.W,9729:g.I,9984:g.Y,9985:g.K,9986:g.X,9987:g.J},R={33071:g.i,33648:g.V,10497:g.sb},w=(g.e,g.t,g.Z,g.C,g.q,g.D,g.u,g.ab,g.u,g.b,g.a,g.Eb,g.tb,g.Qb,g.db,g.Db,g.hb,g.Bb,g.gb,g.o,g.eb,g.p,g.fb,g.Cb,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),L={POSITION:"position",NORMAL:"normal",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},x={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},A={CUBICSPLINE:g.B,LINEAR:g.A,STEP:g.z},_="OPAQUE",P="MASK",O="BLEND",C={"image/png":g.qb,"image/jpeg":g.rb};function U(e,t){return"string"!==typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e}function D(e,t,n){for(var a in n.extensions)void 0===e[a]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[a]=n.extensions[a])}function H(e,t){void 0!==t.extras&&("object"===typeof t.extras?e.userData=t.extras:console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function I(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,a=t.weights.length;n<a;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(n=0,a=r.length;n<a;n++)e.morphTargetDictionary[r[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function N(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}function j(e,t){if(e.length!==t.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==t[n])return!1;return!0}function k(e,t){for(var a=0,r=e.length;a<r;a++){var i=e[a];if(s=i.primitive,o=t,c=void 0,l=void 0,c=s.extensions?s.extensions[n.KHR_DRACO_MESH_COMPRESSION]:void 0,l=o.extensions?o.extensions[n.KHR_DRACO_MESH_COMPRESSION]:void 0,c&&l?c.bufferView===l.bufferView&&N(c.attributes,l.attributes):s.indices===o.indices&&N(s.attributes,o.attributes))return i.promise}var s,o,c,l;return null}function F(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,n=e.itemSize,a=e.array.slice(0,t*n),r=0,i=0;r<t;++r)a[i++]=e.getX(r),n>=2&&(a[i++]=e.getY(r)),n>=3&&(a[i++]=e.getZ(r)),n>=4&&(a[i++]=e.getW(r));return new g.g(a,n,e.normalized)}return e.clone()}function G(e,n,a){this.json=e||{},this.extensions=n||{},this.options=a||{},this.cache=new t,this.primitiveCache=[],this.multiplePrimitivesCache=[],this.multiPassGeometryCache=[],this.textureLoader=new g.Gb(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new g.s(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function K(e,t,n){var a=t.attributes,r=[];function i(t,a){return n.getDependency("accessor",t).then(function(t){e.addAttribute(a,t)})}for(var s in a){var o=L[s];o&&(o in e.attributes||r.push(i(a[s],o)))}if(void 0!==t.indices&&!e.index){var c=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});r.push(c)}return H(e,t),Promise.all(r).then(function(){return void 0!==t.targets?function(e,t,n){for(var a=!1,r=!1,i=0,s=t.length;i<s&&(void 0!==(l=t[i]).POSITION&&(a=!0),void 0!==l.NORMAL&&(r=!0),!a||!r);i++);if(!a&&!r)return Promise.resolve(e);var o=[],c=[];for(i=0,s=t.length;i<s;i++){var l=t[i];if(a){var u=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION).then(function(e){return F(e)}):e.attributes.position;o.push(u)}r&&(u=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL).then(function(e){return F(e)}):e.attributes.normal,c.push(u))}return Promise.all([Promise.all(o),Promise.all(c)]).then(function(n){for(var i=n[0],s=n[1],o=0,c=t.length;o<c;o++){var l=t[o],u="morphTarget"+o;if(a&&void 0!==l.POSITION){var p=i[o];p.name=u;for(var h=e.attributes.position,d=0,m=p.count;d<m;d++)p.setXYZ(d,p.getX(d)+h.getX(d),p.getY(d)+h.getY(d),p.getZ(d)+h.getZ(d))}if(r&&void 0!==l.NORMAL){var f=s[o];f.name=u;var v=e.attributes.normal;for(d=0,m=f.count;d<m;d++)f.setXYZ(d,f.getX(d)+v.getX(d),f.getY(d)+v.getY(d),f.getZ(d)+v.getZ(d))}}return a&&(e.morphAttributes.position=i),r&&(e.morphAttributes.normal=s),e})}(e,t.targets,n):e})}return G.prototype.parse=function(e,t){var n=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then(function(t){var a=t.scenes||[],r=a[n.scene||0],i=t.animations||[],s=t.cameras||[];e(r,a,s,i,n)}).catch(t)},G.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],a={},r={},i=0,s=t.length;i<s;i++)for(var o=t[i].joints,c=0,l=o.length;c<l;c++)e[o[c]].isBone=!0;for(var u=0,p=e.length;u<p;u++){var h=e[u];void 0!==h.mesh&&(void 0===a[h.mesh]&&(a[h.mesh]=r[h.mesh]=0),a[h.mesh]++,void 0!==h.skin&&(n[h.mesh].isSkinnedMesh=!0))}this.json.meshReferences=a,this.json.meshUses=r},G.prototype.getDependency=function(e,t){var a=e+":"+t,r=this.cache.get(a);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this.loadMesh(t);break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this.loadBufferView(t);break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this.loadMaterial(t);break;case"texture":r=this.loadTexture(t);break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;case"light":r=this.extensions[n.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(a,r)}return r},G.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,a=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(a.map(function(t,a){return n.getDependency(e,a)})),this.cache.add(e,t)}return t},G.prototype.getMultiDependencies=function(e){for(var t={},n=[],a=0,r=e.length;a<r;a++){var i=e[a],s=this.getDependencies(i);s=s.then(function(e,n){t[e]=n}.bind(this,i+("mesh"===i?"es":"s"))),n.push(s)}return Promise.all(n).then(function(){return t})},G.prototype.loadBuffer=function(e){var t=this.json.buffers[e],a=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var r=this.options;return new Promise(function(e,n){a.load(U(t.uri,r.path),e,void 0,function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})},G.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var n=t.byteLength||0,a=t.byteOffset||0;return e.slice(a,a+n)})},G.prototype.loadAccessor=function(e){var t=this,n=this.json,a=this.json.accessors[e];if(void 0===a.bufferView&&void 0===a.sparse)return Promise.resolve(null);var r=[];return void 0!==a.bufferView?r.push(this.getDependency("bufferView",a.bufferView)):r.push(null),void 0!==a.sparse&&(r.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(r).then(function(e){var r,i,s=e[0],o=w[a.type],c=S[a.componentType],l=c.BYTES_PER_ELEMENT,u=l*o,p=a.byteOffset||0,h=void 0!==a.bufferView?n.bufferViews[a.bufferView].byteStride:void 0,d=!0===a.normalized;if(h&&h!==u){var m="InterleavedBuffer:"+a.bufferView+":"+a.componentType,f=t.cache.get(m);f||(r=new c(s),f=new g.w(r,h/l),t.cache.add(m,f)),i=new g.x(f,o,p/l,d)}else r=null===s?new c(a.count*o):new c(s,p,a.count*o),i=new g.g(r,o,d);if(void 0!==a.sparse){var v=w.SCALAR,b=S[a.sparse.indices.componentType],y=a.sparse.indices.byteOffset||0,E=a.sparse.values.byteOffset||0,T=new b(e[1],y,a.sparse.count*v),M=new c(e[2],E,a.sparse.count*o);null!==s&&i.setArray(i.array.slice());for(var R=0,L=T.length;R<L;R++){var x=T[R];if(i.setX(x,M[R*o]),o>=2&&i.setY(x,M[R*o+1]),o>=3&&i.setZ(x,M[R*o+2]),o>=4&&i.setW(x,M[R*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return i})},G.prototype.loadTexture=function(e){var t,a=this,r=this.json,i=this.options,s=this.textureLoader,o=window.URL||window.webkitURL,c=r.textures[e],l=c.extensions||{},u=(t=l[n.MSFT_TEXTURE_DDS]?r.images[l[n.MSFT_TEXTURE_DDS].source]:r.images[c.source]).uri,p=!1;return void 0!==t.bufferView&&(u=a.getDependency("bufferView",t.bufferView).then(function(e){p=!0;var n=new Blob([e],{type:t.mimeType});return u=o.createObjectURL(n)})),Promise.resolve(u).then(function(e){var t=g.L.Handlers.get(e);return t||(t=l[n.MSFT_TEXTURE_DDS]?a.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:s),new Promise(function(n,a){t.load(U(e,i.path),n,void 0,a)})}).then(function(e){!0===p&&o.revokeObjectURL(u),e.flipY=!1,void 0!==c.name&&(e.name=c.name),t.mimeType in C&&(e.format=C[t.mimeType]);var n=(r.samplers||{})[c.sampler]||{};return e.magFilter=M[n.magFilter]||g.I,e.minFilter=M[n.minFilter]||g.J,e.wrapS=R[n.wrapS]||g.sb,e.wrapT=R[n.wrapT]||g.sb,e})},G.prototype.assignTexture=function(e,t,a){var r=this;return this.getDependency("texture",a.index).then(function(i){if(r.extensions[n.KHR_TEXTURE_TRANSFORM]){var s=void 0!==a.extensions?a.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;s&&(i=r.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(i,s))}e[t]=i})},G.prototype.loadMaterial=function(e){var t,a=this.json,r=this.extensions,i=a.materials[e],s={},o=i.extensions||{},c=[];if(o[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var l=r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=l.getMaterialType(i),c.push(l.extendParams(s,i,this))}else if(o[n.KHR_MATERIALS_UNLIT]){var u=r[n.KHR_MATERIALS_UNLIT];t=u.getMaterialType(i),c.push(u.extendParams(s,i,this))}else{t=g.U;var p=i.pbrMetallicRoughness||{};if(s.color=new g.k(1,1,1),s.opacity=1,Array.isArray(p.baseColorFactor)){var h=p.baseColorFactor;s.color.fromArray(h),s.opacity=h[3]}void 0!==p.baseColorTexture&&c.push(this.assignTexture(s,"map",p.baseColorTexture)),s.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,s.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(c.push(this.assignTexture(s,"metalnessMap",p.metallicRoughnessTexture)),c.push(this.assignTexture(s,"roughnessMap",p.metallicRoughnessTexture)))}!0===i.doubleSided&&(s.side=g.n);var d=i.alphaMode||_;return d===O?s.transparent=!0:(s.transparent=!1,d===P&&(s.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&t!==g.T&&(c.push(this.assignTexture(s,"normalMap",i.normalTexture)),s.normalScale=new g.Kb(1,1),void 0!==i.normalTexture.scale&&s.normalScale.set(i.normalTexture.scale,i.normalTexture.scale)),void 0!==i.occlusionTexture&&t!==g.T&&(c.push(this.assignTexture(s,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(s.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&t!==g.T&&(s.emissive=(new g.k).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&t!==g.T&&c.push(this.assignTexture(s,"emissiveMap",i.emissiveTexture)),Promise.all(c).then(function(){var e;return e=t===g.wb?r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new t(s),void 0!==i.name&&(e.name=i.name),e.normalScale&&(e.normalScale.y=-e.normalScale.y),e.map&&(e.map.encoding=g.Rb),e.emissiveMap&&(e.emissiveMap.encoding=g.Rb),e.specularMap&&(e.specularMap.encoding=g.Rb),H(e,i),i.extensions&&D(r,e,i),e})},G.prototype.loadGeometries=function(e){var t,a=this,r=this.extensions,i=this.primitiveCache,s=function(e){if(e.length<2)return!1;var t=e[0],a=t.targets||[];if(void 0===t.indices)return!1;for(var r=1,i=e.length;r<i;r++){var s=e[r];if(t.mode!==s.mode)return!1;if(void 0===s.indices)return!1;if(s.extensions&&s.extensions[n.KHR_DRACO_MESH_COMPRESSION])return!1;if(!N(t.attributes,s.attributes))return!1;var o=s.targets||[];if(a.length!==o.length)return!1;for(var c=0,l=a.length;c<l;c++)if(!N(a[c],o[c]))return!1}return!0}(e);function o(e){return r[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,a).then(function(t){return K(t,e,a)})}s&&(t=e,e=[e[0]]);for(var c=[],l=0,u=e.length;l<u;l++){var p,h=e[l],d=k(i,h);if(d)c.push(d);else p=h.extensions&&h.extensions[n.KHR_DRACO_MESH_COMPRESSION]?o(h):K(new g.h,h,a),i.push({primitive:h,promise:p}),c.push(p)}return Promise.all(c).then(function(n){if(s){var r=n[0];if(null!==(h=function(e,t,n){for(var a=0,r=e.length;a<r;a++){var i=e[a];if(t===i.baseGeometry&&j(n,i.primitives))return i.geometry}return null}(p=a.multiPassGeometryCache,r,t)))return[h.geometry];var i=new g.h;for(var o in i.name=r.name,i.userData=r.userData,r.attributes)i.addAttribute(o,r.attributes[o]);for(var o in r.morphAttributes)i.morphAttributes[o]=r.morphAttributes[o];for(var c=[],l=0,u=t.length;l<u;l++)c.push(a.getDependency("accessor",t[l].indices));return Promise.all(c).then(function(e){for(var n=[],a=0,s=0,o=t.length;s<o;s++){for(var c=e[s],l=0,u=c.count;l<u;l++)n.push(c.array[l]);i.addGroup(a,c.count,s),a+=c.count}return i.setIndex(n),p.push({geometry:i,baseGeometry:r,primitives:t}),[i]})}if(n.length>1&&void 0!==THREE.BufferGeometryUtils){for(l=1,u=e.length;l<u;l++)if(e[0].mode!==e[l].mode)return n;var p,h;if(h=function(e,t){for(var n=0,a=e.length;n<a;n++){var r=e[n];if(j(t,r.baseGeometries))return r.geometry}return null}(p=a.multiplePrimitivesCache,n)){if(null!==h.geometry)return[h.geometry]}else{i=THREE.BufferGeometryUtils.mergeBufferGeometries(n,!0);if(p.push({geometry:i,baseGeometries:n}),null!==i)return[i]}}return n})},G.prototype.loadMesh=function(e){for(var t=this,a=this.json,r=this.extensions,i=a.meshes[e],s=i.primitives,o=[],c=0,l=s.length;c<l;c++){var u=void 0===s[c].material?new g.U({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:g.t}):this.getDependency("material",s[c].material);o.push(u)}return Promise.all(o).then(function(a){return t.loadGeometries(s).then(function(o){for(var c=1===o.length&&o[0].groups.length>0,l=[],u=0,p=o.length;u<p;u++){var h,d=o[u],S=s[u],M=c?a:a[u];if(S.mode===y||S.mode===E||S.mode===T||void 0===S.mode)!0===(h=!0===i.isSkinnedMesh?new g.yb(d,M):new g.S(d,M)).isSkinnedMesh&&h.normalizeSkinWeights(),S.mode===E?h.drawMode=g.Ib:S.mode===T&&(h.drawMode=g.Hb);else if(S.mode===f)h=new g.H(d,M);else if(S.mode===b)h=new g.E(d,M);else if(S.mode===v)h=new g.G(d,M);else{if(S.mode!==m)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+S.mode);h=new g.lb(d,M)}Object.keys(h.geometry.morphAttributes).length>0&&I(h,i),h.name=i.name||"mesh_"+e,o.length>1&&(h.name+="_"+u),H(h,i),l.push(h);for(var R=c?h.material:[h.material],w=void 0!==d.attributes.color,L=void 0===d.attributes.normal,x=!0===h.isSkinnedMesh,A=Object.keys(d.morphAttributes).length>0,_=A&&void 0!==d.morphAttributes.normal,P=0,O=R.length;P<O;P++){M=R[P];if(h.isPoints){var C="PointsMaterial:"+M.uuid,U=t.cache.get(C);U||(U=new g.mb,g.O.prototype.copy.call(U,M),U.color.copy(M.color),U.map=M.map,U.lights=!1,t.cache.add(C,U)),M=U}else if(h.isLine){C="LineBasicMaterial:"+M.uuid;var D=t.cache.get(C);D||(D=new g.F,g.O.prototype.copy.call(D,M),D.color.copy(M.color),D.lights=!1,t.cache.add(C,D)),M=D}if(w||L||x||A){C="ClonedMaterial:"+M.uuid+":";M.isGLTFSpecularGlossinessMaterial&&(C+="specular-glossiness:"),x&&(C+="skinning:"),w&&(C+="vertex-colors:"),L&&(C+="flat-shading:"),A&&(C+="morph-targets:"),_&&(C+="morph-normals:");var N=t.cache.get(C);N||(N=M.isGLTFSpecularGlossinessMaterial?r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(M):M.clone(),x&&(N.skinning=!0),w&&(N.vertexColors=g.Ob),L&&(N.flatShading=!0),A&&(N.morphTargets=!0),_&&(N.morphNormals=!0),t.cache.add(C,N)),M=N}R[P]=M,M.aoMap&&void 0===d.attributes.uv2&&void 0!==d.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),d.addAttribute("uv2",new g.g(d.attributes.uv.array,2))),M.isGLTFSpecularGlossinessMaterial&&(h.onBeforeRender=r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)}h.material=c?R:R[0]}if(1===l.length)return l[0];var j=new g.v;for(u=0,p=l.length;u<p;u++)j.add(l[u]);return j})})},G.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],a=n[n.type];if(a)return"perspective"===n.type?t=new g.jb(g.P.radToDeg(a.yfov),a.aspectRatio||1,a.znear||1,a.zfar||2e6):"orthographic"===n.type&&(t=new g.ib(a.xmag/-2,a.xmag/2,a.ymag/2,a.ymag/-2,a.znear,a.zfar)),void 0!==n.name&&(t.name=n.name),H(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},G.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return n.inverseBindMatrices=e,n})},G.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],n=[],a=[],r=[],i=[],s=[],o=0,c=t.channels.length;o<c;o++){var l=t.channels[o],u=t.samplers[l.sampler],p=l.target,h=void 0!==p.node?p.node:p.id,m=void 0!==t.parameters?t.parameters[u.input]:u.input,f=void 0!==t.parameters?t.parameters[u.output]:u.output;n.push(this.getDependency("node",h)),a.push(this.getDependency("accessor",m)),r.push(this.getDependency("accessor",f)),i.push(u),s.push(p)}return Promise.all([Promise.all(n),Promise.all(a),Promise.all(r),Promise.all(i),Promise.all(s)]).then(function(n){for(var a=n[0],r=n[1],i=n[2],s=n[3],o=n[4],c=[],l=0,u=a.length;l<u;l++){var p=a[l],h=r[l],m=i[l],f=s[l],v=o[l];if(void 0!==p){var b;switch(p.updateMatrix(),p.matrixAutoUpdate=!0,x[v.path]){case x.weights:b=g.bb;break;case x.rotation:b=g.pb;break;case x.position:case x.scale:default:b=g.Nb}var y=p.name?p.name:p.uuid,E=void 0!==f.interpolation?A[f.interpolation]:g.A,T=[];x[v.path]===x.weights?p.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&T.push(e.name?e.name:e.uuid)}):T.push(y);for(var S=0,M=T.length;S<M;S++){var R=new b(T[S]+"."+x[v.path],g.d.arraySlice(h.array,0),g.d.arraySlice(m.array,0),E);"CUBICSPLINE"===f.interpolation&&(R.createInterpolant=function(e){return new d(this.times,this.values,this.getValueSize()/3,e)},R.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(R)}}}var w=void 0!==t.name?t.name:"animation_"+e;return new g.c(w,void 0,c)})},G.prototype.loadNode=function(e){var t=this.json,a=this.extensions,r=this,i=t.meshReferences,s=t.meshUses,o=t.nodes[e];return(!0===o.isBone?Promise.resolve(new g.f):void 0!==o.mesh?r.getDependency("mesh",o.mesh).then(function(e){var t;if(i[o.mesh]>1){var n=s[o.mesh]++;(t=e.clone()).name+="_instance_"+n,t.onBeforeRender=e.onBeforeRender;for(var a=0,r=t.children.length;a<r;a++)t.children[a].name+="_instance_"+n,t.children[a].onBeforeRender=e.children[a].onBeforeRender}else t=e;return void 0!==o.weights&&t.traverse(function(e){if(e.isMesh)for(var t=0,n=o.weights.length;t<n;t++)e.morphTargetInfluences[t]=o.weights[t]}),t}):void 0!==o.camera?r.getDependency("camera",o.camera):o.extensions&&o.extensions[n.KHR_LIGHTS_PUNCTUAL]&&void 0!==o.extensions[n.KHR_LIGHTS_PUNCTUAL].light?r.getDependency("light",o.extensions[n.KHR_LIGHTS_PUNCTUAL].light):Promise.resolve(new g.cb)).then(function(e){if(void 0!==o.name&&(e.name=g.nb.sanitizeNodeName(o.name)),H(e,o),o.extensions&&D(a,e,o),void 0!==o.matrix){var t=new g.R;t.fromArray(o.matrix),e.applyMatrix(t)}else void 0!==o.translation&&e.position.fromArray(o.translation),void 0!==o.rotation&&e.quaternion.fromArray(o.rotation),void 0!==o.scale&&e.scale.fromArray(o.scale);return e})},G.prototype.loadScene=function(){function e(t,n,a,r){var i=a.nodes[t];return r.getDependency("node",t).then(function(e){return void 0===i.skin?e:r.getDependency("skin",i.skin).then(function(e){for(var n=[],a=0,i=(t=e).joints.length;a<i;a++)n.push(r.getDependency("node",t.joints[a]));return Promise.all(n)}).then(function(n){for(var a=!0===e.isGroup?e.children:[e],r=0,i=a.length;r<i;r++){for(var s=a[r],o=[],c=[],l=0,u=n.length;l<u;l++){var p=n[l];if(p){o.push(p);var h=new g.R;void 0!==t.inverseBindMatrices&&h.fromArray(t.inverseBindMatrices.array,16*l),c.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}s.bind(new g.xb(o,c),s.matrixWorld)}return e});var t}).then(function(t){n.add(t);var s=[];if(i.children)for(var o=i.children,c=0,l=o.length;c<l;c++){var u=o[c];s.push(e(u,t,a,r))}return Promise.all(s)})}return function(t){var n=this.json,a=this.extensions,r=this.json.scenes[t],i=new g.ub;void 0!==r.name&&(i.name=r.name),H(i,r),r.extensions&&D(a,i,r);for(var s=r.nodes||[],o=[],c=0,l=s.length;c<l;c++)o.push(e(s[c],i,n,this));return Promise.all(o).then(function(){return i})}}(),e}();function S(e,t){var n=e.scene.children[0];n.position.copy(t);var a=e.animations[0],r=new v.a(n);return n.userData.onUpdate=function(e){r.update(e)},r.clipAction(a).play(),n}function M(){return R.apply(this,arguments)}function R(){return(R=Object(f.a)(m.a.mark(function e(){var t,n,a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=E(new T),e.t0=S,e.next=4,t.load("assets/models//Parrot.glb");case 4:return e.t1=e.sent,e.t2=new v.e(0,0,2.5),n=(0,e.t0)(e.t1,e.t2),e.t3=S,e.next=10,t.load("assets/models//Flamingo.glb");case 10:return e.t4=e.sent,e.t5=new v.e(7.5,0,-10),a=(0,e.t3)(e.t4,e.t5),e.t6=S,e.next=16,t.load("assets/models//Stork.glb");case 16:return e.t7=e.sent,e.t8=new v.e(0,-2.5,-10),r=(0,e.t6)(e.t7,e.t8),e.abrupt("return",{parrot:n,flamingo:a,stork:r});case 20:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var w=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(m.a.mark(function e(){var t,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.app=new y("#container"),this.app.init(),this.app.scene.background=new v.b(9419988),this.app.camera.position.set(-2.5,2.5,6),this.app.start(),a=void 0,r=void 0,a=new v.d(14544639,986637,5),(r=new v.c(16777212,15)).position.set(0,1,-10),t={ambient:a,main:r},this.app.scene.add(t.ambient,t.main),e.next=9,M();case 9:n=e.sent,this.app.scene.add(n.parrot,n.flamingo,n.stork);case 11:case"end":return e.stop()}var a,r},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.app.stop(),this.mount.removeChild(this.app.renderer.domElement)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"container",ref:function(t){e.mount=t}})}}]),t}(l.a.Component),L=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(h,null),l.a.createElement(w,{className:"container"}))}}]),t}(l.a.Component);t.default=L;p.a.render(l.a.createElement(L,null),document.getElementById("root"))}},[[12,2,1]]]);
//# sourceMappingURL=main.34f3f479.chunk.js.map