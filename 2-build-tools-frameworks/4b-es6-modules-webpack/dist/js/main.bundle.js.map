{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/main.css","webpack:///./src/models/Parrot.glb","webpack:///./src/models/Flamingo.glb","webpack:///./src/models/Stork.glb","webpack:///./src/main.css?37f5","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///D:/Web/discoverthreejs-django/hugo/resources/example-js-symlink/vendor/three/controls/OrbitControls.module.js","webpack:///D:/Web/discoverthreejs-django/hugo/resources/example-js-symlink/vendor/App.module.js","webpack:///D:/Web/discoverthreejs-django/hugo/resources/example-js-symlink/vendor/three/loaders/GLTFLoader.module.js","webpack:///./src/js/scene.js","webpack:///./src/js/models.js","webpack:///./src/js/lights.js"],"names":["parentHotUpdateCallback","window","chunkId","moreModules","hotAvailableFilesMap","hotRequestedFilesMap","moduleId","Object","prototype","hasOwnProperty","call","hotUpdate","hotWaitingFiles","hotChunksLoading","hotUpdateDownloaded","hotAddUpdateChunk","hotCurrentChildModule","hotApplyOnUpdate","hotCurrentHash","hotRequestTimeout","hotCurrentModuleData","hotCurrentParents","hotCurrentParentsTemp","hotCreateRequire","me","installedModules","__webpack_require__","fn","request","hot","active","parents","indexOf","push","children","console","warn","ObjectFactory","name","configurable","enumerable","get","set","value","defineProperty","e","hotStatus","hotSetStatus","then","finishChunkLoading","err","hotWaitingFilesMap","hotEnsureUpdateChunk","t","mode","hotCreateModule","_acceptedDependencies","_declinedDependencies","_selfAccepted","_selfDeclined","_disposeHandlers","_main","accept","dep","callback","undefined","i","length","decline","dispose","addDisposeHandler","removeDisposeHandler","idx","splice","check","hotCheck","apply","hotApply","status","l","hotStatusHandlers","addStatusHandler","removeStatusHandler","data","newStatus","hotDeferred","hotUpdateNewHash","toModuleId","id","Error","requestTimeout","Promise","resolve","reject","XMLHttpRequest","requestPath","p","open","timeout","send","onreadystatechange","readyState","update","JSON","parse","responseText","c","h","promise","script","document","createElement","charset","src","head","appendChild","hotDownloadUpdateChunk","deferred","result","outdatedModules","options","cb","j","module","getAffectedStuff","updateModuleId","outdatedDependencies","queue","slice","map","chain","queueItem","pop","type","parentId","parent","concat","addAllToSet","a","b","item","appliedUpdate","warnUnexpectedRequire","abortError","doApply","doDispose","chainInfo","join","onDeclined","ignoreDeclined","onUnaccepted","ignoreUnaccepted","onAccepted","onDisposed","outdatedSelfAcceptedModules","errorHandler","keys","forEach","installedChunks","hotDisposeChunk","dependency","moduleOutdatedDependencies","disposeHandlers","child","modules","error","callbacks","onErrored","dependencyId","ignoreErrored","err2","originalError","exports","m","d","getter","o","r","Symbol","toStringTag","__esModule","ns","create","key","bind","n","object","property","s","content","hmr","transform","insertInto","locals","newContent","useSourceMap","list","toString","this","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","stringify","sourceURLs","sources","source","sourceRoot","cssWithMappingToString","mediaQuery","alreadyImportedModules","memo","stylesInDom","isOldIE","all","atob","arguments","getElement","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","firstChild","before","removeStyleElement","parentNode","removeChild","createStyleElement","attrs","nonce","nc","getNonce","addAttrs","el","setAttribute","obj","remove","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","cssNode","childNodes","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","test","OrbitControls","domElement","offset","quat","quatInverse","lastPosition","lastQuaternion","enabled","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","MIDDLE","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","state","STATE","NONE","Quaternion","setFromUnitVectors","up","inverse","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","max","min","makeSafe","radius","scale","add","panOffset","setFromSpherical","lookAt","multiplyScalar","zoomChanged","distanceToSquared","EPS","dot","quaternion","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","startEvent","endEvent","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_DOLLY_PAN","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","v","panLeft","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyIn","dollyScale","dollyOut","handleMouseDownPan","event","clientX","clientY","preventDefault","button","ctrlKey","metaKey","shiftKey","handleMouseDownRotate","handleMouseDownDolly","addEventListener","subVectors","x","y","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","handleMouseWheel","keyCode","handleKeyDown","touches","pageX","pageY","handleTouchStartRotate","dx","dy","sqrt","handleTouchStartDollyPan","handleTouchMoveRotate","handleTouchMoveDollyPan","EventDispatcher","constructor","defineProperties","center","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","THREE_APP","container","_classCallCheck","scene","Scene","clock","Clock","running","alpha","antialias","powerPreference","stencil","gammaFactor","gammaOutput","autoResize","maxPixelRatio","controlsAutoUpdate","onUpdate","onResize","_this","initCamera","initControls","initRenderer","onWindowResize","camera","PerspectiveCamera","controls","renderer","WebGLRenderer","setSize","setPixelRatio","devicePixelRatio","render","delta","getDelta","traverse","userData","_this2","setAnimationLoop","aspect","app","GLTFLoader","manager","DefaultLoadingManager","dracoLoader","GLTFRegistry","objects","removeAll","crossOrigin","load","url","onLoad","onProgress","onError","resourcePath","path","LoaderUtils","extractUrlBase","itemStart","_onError","itemError","itemEnd","loader","FileLoader","setPath","setResponseType","gltf","setCrossOrigin","setResourcePath","setDRACOLoader","extensions","decodeText","Uint8Array","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","asset","version","extensionsUsed","extensionName","extensionsRequired","KHR_LIGHTS_PUNCTUAL","GLTFLightsExtension","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","parser","GLTFParser","scenes","cameras","animations","glTF","addUnknownExtensionsToUserData","THREE","DDSLoader","ddsLoader","extension","lightDefs","lights","loadLight","lightIndex","lightNode","lightDef","color","Color","fromArray","range","DirectionalLight","PointLight","SpotLight","spot","innerConeAngle","outerConeAngle","penumbra","decay","intensity","getMaterialType","material","MeshBasicMaterial","extendParams","materialParams","pending","opacity","metallicRoughness","pbrMetallicRoughness","Array","isArray","baseColorFactor","array","baseColorTexture","assignTexture","BINARY_EXTENSION_HEADER_LENGTH","BINARY_EXTENSION_CHUNK_TYPES","BIN","headerView","DataView","header","magic","getUint32","chunkView","chunkIndex","byteLength","chunkLength","chunkType","contentArray","byteOffset","DRACOLoader","getDecoderModule","specularGlossinessParams","ShaderMaterial","params","pbrSpecularGlossiness","shader","ShaderLib","uniforms","UniformsUtils","specularMapParsFragmentChunk","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","fragmentShader","roughness","metalness","roughnessMap","metalnessMap","specular","setHex","glossiness","specularMap","glossinessMap","vertexShader","defines","STANDARD","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","fog","transparent","isGLTFSpecularGlossinessMaterial","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","refractionRatio","derivatives","cloneMaterial","il","refreshUniforms","geometry","group","uvScaleMap","diffuse","isWebGLRenderTarget","texture","matrixAutoUpdate","updateMatrix","uvTransform","flipEnvMap","isCubeTexture","reflectivity","maxMipLevel","properties","__maxMipLevel","USE_GLOSSINESSMAP","USE_ROUGHNESSMAP","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","Interpolant","decodePrimitive","primitive","bufferViewIndex","bufferView","gltfAttributeMap","attributes","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","getDependency","decodeDracoFile","attribute","extendTexture","rotation","repeat","texCoord","needsUpdate","copySampleValue_","values","valueSize","beforeStart_","afterEnd_","interpolate_","i1","t0","t1","stride","stride2","stride3","td","pp","ppp","offset1","offset0","s2","s3","s0","s1","p0","m0","p1","m1","WEBGL_CONSTANTS","Number","5120","Int8Array","5121","5122","Int16Array","5123","Uint16Array","5125","Uint32Array","5126","Float32Array","WEBGL_FILTERS","9728","NearestFilter","9729","LinearFilter","9984","NearestMipMapNearestFilter","9985","LinearMipMapNearestFilter","9986","NearestMipMapLinearFilter","9987","LinearMipMapLinearFilter","WEBGL_WRAPPINGS","33071","ClampToEdgeWrapping","33648","MirroredRepeatWrapping","10497","RepeatWrapping","WEBGL_TYPE_SIZES","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","POSITION","NORMAL","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","LINEAR","STEP","ALPHA_MODES","MIME_TYPE_FORMATS","image/png","RGBAFormat","image/jpeg","RGBFormat","resolveURL","knownExtensions","objectDef","gltfExtensions","assignExtrasToUserData","gltfDef","extras","GLTFLoader_module_typeof","updateMorphTargets","mesh","meshDef","morphTargetInfluences","targetNames","morphTargetDictionary","isObjectEqual","isArrayEqual","getCachedGeometry","cache","newPrimitive","cached","dracoExtA","dracoExtB","indices","cloneBufferAttribute","isInterleavedBufferAttribute","count","itemSize","getX","getY","getZ","getW","BufferAttribute","primitiveCache","multiplePrimitivesCache","multiPassGeometryCache","textureLoader","TextureLoader","fileLoader","addPrimitiveAttributes","primitiveDef","assignAttributeAccessor","accessorIndex","accessor","addAttribute","gltfAttributeName","threeAttributeName","setIndex","targets","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","normal","morphPositions","morphNormals","positionAttribute","jl","setXYZ","normalAttribute","morphAttributes","addMorphTargets","markDefs","getMultiDependencies","dependencies","catch","nodeDefs","nodes","skinDefs","skins","meshDefs","meshes","meshReferences","meshUses","skinIndex","skinLength","joints","isBone","nodeIndex","nodeLength","nodeDef","skin","isSkinnedMesh","cacheKey","loadScene","loadNode","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadTexture","loadSkin","loadAnimation","loadCamera","getDependencies","defs","def","types","results","bufferIndex","bufferDef","buffers","uri","bufferViewDef","bufferViews","buffer","sparse","pendingBufferViews","bufferAttribute","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","byteStride","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setArray","setX","setY","setZ","setW","textureIndex","webkitURL","textureDef","textures","textureExtensions","sourceURI","images","isObjectURL","mimeType","Loader","Handlers","flipY","format","sampler","samplers","magFilter","minFilter","wrapS","wrapT","mapName","mapDef","materialIndex","materialType","materialDef","materials","materialExtensions","sgExtension","kmuExtension","MeshStandardMaterial","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","side","DoubleSide","alphaMode","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","encoding","sRGBEncoding","loadGeometries","primitives","originalPrimitives","isMultiPass","primitive0","targets0","isMultiPassGeometry","createDracoPrimitive","geometryPromise","BufferGeometry","geometries","baseGeometry","getCachedMultiPassGeometry","pendingIndices","addGroup","BufferGeometryUtils","baseGeometries","getCachedCombinedGeometry","mergeBufferGeometries","meshIndex","depthTest","FrontSide","originalMaterials","isMultiMaterial","groups","SkinnedMesh","Mesh","normalizeSkinWeights","drawMode","TriangleStripDrawMode","TriangleFanDrawMode","LineSegments","Line","LineLoop","Points","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","uuid","pointsMaterial","PointsMaterial","Material","isLine","lineMaterial","LineBasicMaterial","cachedMaterial","skinning","vertexColors","VertexColors","flatShading","morphTargets","uv2","uv","log","onBeforeRender","Group","cameraIndex","cameraDef","radToDeg","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","node","input","parameters","output","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","TypedKeyframeTrack","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","interpolation","isMesh","track","AnimationUtils","arraySlice","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","Bone","instanceNum","light","Object3D","PropertyBinding","sanitizeNodeName","Matrix4","applyMatrix","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","isGroup","bones","boneInverses","jointNode","mat","Skeleton","matrixWorld","sceneIndex","sceneDef","nodeIds","model","animation","mixer","AnimationMixer","clipAction","play","App","init","background","ambientLight","AmbientLight","frontLight","backLight","initLights","errorMessage","parrotPosition","Parrot","flamingoPosition","Flamingo","storkPosition","Stork","loadModels","start"],"mappings":"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","file":"js/main.bundle.js","sourcesContent":[" \tfunction hotDisposeChunk(chunkId) {\n \t\tdelete installedChunks[chunkId];\n \t}\n \tvar parentHotUpdateCallback = window[\"webpackHotUpdate\"];\n \twindow[\"webpackHotUpdate\"] = // eslint-disable-next-line no-unused-vars\n \tfunction webpackHotUpdateCallback(chunkId, moreModules) {\n \t\thotAddUpdateChunk(chunkId, moreModules);\n \t\tif (parentHotUpdateCallback) parentHotUpdateCallback(chunkId, moreModules);\n \t} ;\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadUpdateChunk(chunkId) {\n \t\tvar script = document.createElement(\"script\");\n \t\tscript.charset = \"utf-8\";\n \t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".\" + hotCurrentHash + \".hot-update.js\";\n \t\tif (null) script.crossOrigin = null;\n \t\tdocument.head.appendChild(script);\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadManifest(requestTimeout) {\n \t\trequestTimeout = requestTimeout || 10000;\n \t\treturn new Promise(function(resolve, reject) {\n \t\t\tif (typeof XMLHttpRequest === \"undefined\") {\n \t\t\t\treturn reject(new Error(\"No browser support\"));\n \t\t\t}\n \t\t\ttry {\n \t\t\t\tvar request = new XMLHttpRequest();\n \t\t\t\tvar requestPath = __webpack_require__.p + \"\" + hotCurrentHash + \".hot-update.json\";\n \t\t\t\trequest.open(\"GET\", requestPath, true);\n \t\t\t\trequest.timeout = requestTimeout;\n \t\t\t\trequest.send(null);\n \t\t\t} catch (err) {\n \t\t\t\treturn reject(err);\n \t\t\t}\n \t\t\trequest.onreadystatechange = function() {\n \t\t\t\tif (request.readyState !== 4) return;\n \t\t\t\tif (request.status === 0) {\n \t\t\t\t\t// timeout\n \t\t\t\t\treject(\n \t\t\t\t\t\tnew Error(\"Manifest request to \" + requestPath + \" timed out.\")\n \t\t\t\t\t);\n \t\t\t\t} else if (request.status === 404) {\n \t\t\t\t\t// no update available\n \t\t\t\t\tresolve();\n \t\t\t\t} else if (request.status !== 200 && request.status !== 304) {\n \t\t\t\t\t// other failure\n \t\t\t\t\treject(new Error(\"Manifest request to \" + requestPath + \" failed.\"));\n \t\t\t\t} else {\n \t\t\t\t\t// success\n \t\t\t\t\ttry {\n \t\t\t\t\t\tvar update = JSON.parse(request.responseText);\n \t\t\t\t\t} catch (e) {\n \t\t\t\t\t\treject(e);\n \t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t\tresolve(update);\n \t\t\t\t}\n \t\t\t};\n \t\t});\n \t}\n\n \tvar hotApplyOnUpdate = true;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentHash = \"7427e03ff3f267fcebbe\";\n \tvar hotRequestTimeout = 10000;\n \tvar hotCurrentModuleData = {};\n \tvar hotCurrentChildModule;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParents = [];\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParentsTemp = [];\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateRequire(moduleId) {\n \t\tvar me = installedModules[moduleId];\n \t\tif (!me) return __webpack_require__;\n \t\tvar fn = function(request) {\n \t\t\tif (me.hot.active) {\n \t\t\t\tif (installedModules[request]) {\n \t\t\t\t\tif (installedModules[request].parents.indexOf(moduleId) === -1) {\n \t\t\t\t\t\tinstalledModules[request].parents.push(moduleId);\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\thotCurrentParents = [moduleId];\n \t\t\t\t\thotCurrentChildModule = request;\n \t\t\t\t}\n \t\t\t\tif (me.children.indexOf(request) === -1) {\n \t\t\t\t\tme.children.push(request);\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\tconsole.warn(\n \t\t\t\t\t\"[HMR] unexpected require(\" +\n \t\t\t\t\t\trequest +\n \t\t\t\t\t\t\") from disposed module \" +\n \t\t\t\t\t\tmoduleId\n \t\t\t\t);\n \t\t\t\thotCurrentParents = [];\n \t\t\t}\n \t\t\treturn __webpack_require__(request);\n \t\t};\n \t\tvar ObjectFactory = function ObjectFactory(name) {\n \t\t\treturn {\n \t\t\t\tconfigurable: true,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: function() {\n \t\t\t\t\treturn __webpack_require__[name];\n \t\t\t\t},\n \t\t\t\tset: function(value) {\n \t\t\t\t\t__webpack_require__[name] = value;\n \t\t\t\t}\n \t\t\t};\n \t\t};\n \t\tfor (var name in __webpack_require__) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(__webpack_require__, name) &&\n \t\t\t\tname !== \"e\" &&\n \t\t\t\tname !== \"t\"\n \t\t\t) {\n \t\t\t\tObject.defineProperty(fn, name, ObjectFactory(name));\n \t\t\t}\n \t\t}\n \t\tfn.e = function(chunkId) {\n \t\t\tif (hotStatus === \"ready\") hotSetStatus(\"prepare\");\n \t\t\thotChunksLoading++;\n \t\t\treturn __webpack_require__.e(chunkId).then(finishChunkLoading, function(err) {\n \t\t\t\tfinishChunkLoading();\n \t\t\t\tthrow err;\n \t\t\t});\n\n \t\t\tfunction finishChunkLoading() {\n \t\t\t\thotChunksLoading--;\n \t\t\t\tif (hotStatus === \"prepare\") {\n \t\t\t\t\tif (!hotWaitingFilesMap[chunkId]) {\n \t\t\t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t\t\t}\n \t\t\t\t\tif (hotChunksLoading === 0 && hotWaitingFiles === 0) {\n \t\t\t\t\t\thotUpdateDownloaded();\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t};\n \t\tfn.t = function(value, mode) {\n \t\t\tif (mode & 1) value = fn(value);\n \t\t\treturn __webpack_require__.t(value, mode & ~1);\n \t\t};\n \t\treturn fn;\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateModule(moduleId) {\n \t\tvar hot = {\n \t\t\t// private stuff\n \t\t\t_acceptedDependencies: {},\n \t\t\t_declinedDependencies: {},\n \t\t\t_selfAccepted: false,\n \t\t\t_selfDeclined: false,\n \t\t\t_disposeHandlers: [],\n \t\t\t_main: hotCurrentChildModule !== moduleId,\n\n \t\t\t// Module API\n \t\t\tactive: true,\n \t\t\taccept: function(dep, callback) {\n \t\t\t\tif (dep === undefined) hot._selfAccepted = true;\n \t\t\t\telse if (typeof dep === \"function\") hot._selfAccepted = dep;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback || function() {};\n \t\t\t\telse hot._acceptedDependencies[dep] = callback || function() {};\n \t\t\t},\n \t\t\tdecline: function(dep) {\n \t\t\t\tif (dep === undefined) hot._selfDeclined = true;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._declinedDependencies[dep[i]] = true;\n \t\t\t\telse hot._declinedDependencies[dep] = true;\n \t\t\t},\n \t\t\tdispose: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\taddDisposeHandler: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\tremoveDisposeHandler: function(callback) {\n \t\t\t\tvar idx = hot._disposeHandlers.indexOf(callback);\n \t\t\t\tif (idx >= 0) hot._disposeHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t// Management API\n \t\t\tcheck: hotCheck,\n \t\t\tapply: hotApply,\n \t\t\tstatus: function(l) {\n \t\t\t\tif (!l) return hotStatus;\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\taddStatusHandler: function(l) {\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\tremoveStatusHandler: function(l) {\n \t\t\t\tvar idx = hotStatusHandlers.indexOf(l);\n \t\t\t\tif (idx >= 0) hotStatusHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t//inherit from previous dispose call\n \t\t\tdata: hotCurrentModuleData[moduleId]\n \t\t};\n \t\thotCurrentChildModule = undefined;\n \t\treturn hot;\n \t}\n\n \tvar hotStatusHandlers = [];\n \tvar hotStatus = \"idle\";\n\n \tfunction hotSetStatus(newStatus) {\n \t\thotStatus = newStatus;\n \t\tfor (var i = 0; i < hotStatusHandlers.length; i++)\n \t\t\thotStatusHandlers[i].call(null, newStatus);\n \t}\n\n \t// while downloading\n \tvar hotWaitingFiles = 0;\n \tvar hotChunksLoading = 0;\n \tvar hotWaitingFilesMap = {};\n \tvar hotRequestedFilesMap = {};\n \tvar hotAvailableFilesMap = {};\n \tvar hotDeferred;\n\n \t// The update info\n \tvar hotUpdate, hotUpdateNewHash;\n\n \tfunction toModuleId(id) {\n \t\tvar isNumber = +id + \"\" === id;\n \t\treturn isNumber ? +id : id;\n \t}\n\n \tfunction hotCheck(apply) {\n \t\tif (hotStatus !== \"idle\") {\n \t\t\tthrow new Error(\"check() is only allowed in idle status\");\n \t\t}\n \t\thotApplyOnUpdate = apply;\n \t\thotSetStatus(\"check\");\n \t\treturn hotDownloadManifest(hotRequestTimeout).then(function(update) {\n \t\t\tif (!update) {\n \t\t\t\thotSetStatus(\"idle\");\n \t\t\t\treturn null;\n \t\t\t}\n \t\t\thotRequestedFilesMap = {};\n \t\t\thotWaitingFilesMap = {};\n \t\t\thotAvailableFilesMap = update.c;\n \t\t\thotUpdateNewHash = update.h;\n\n \t\t\thotSetStatus(\"prepare\");\n \t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\thotDeferred = {\n \t\t\t\t\tresolve: resolve,\n \t\t\t\t\treject: reject\n \t\t\t\t};\n \t\t\t});\n \t\t\thotUpdate = {};\n \t\t\tvar chunkId = 0;\n \t\t\t// eslint-disable-next-line no-lone-blocks\n \t\t\t{\n \t\t\t\t/*globals chunkId */\n \t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t}\n \t\t\tif (\n \t\t\t\thotStatus === \"prepare\" &&\n \t\t\t\thotChunksLoading === 0 &&\n \t\t\t\thotWaitingFiles === 0\n \t\t\t) {\n \t\t\t\thotUpdateDownloaded();\n \t\t\t}\n \t\t\treturn promise;\n \t\t});\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotAddUpdateChunk(chunkId, moreModules) {\n \t\tif (!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])\n \t\t\treturn;\n \t\thotRequestedFilesMap[chunkId] = false;\n \t\tfor (var moduleId in moreModules) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\thotUpdate[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif (--hotWaitingFiles === 0 && hotChunksLoading === 0) {\n \t\t\thotUpdateDownloaded();\n \t\t}\n \t}\n\n \tfunction hotEnsureUpdateChunk(chunkId) {\n \t\tif (!hotAvailableFilesMap[chunkId]) {\n \t\t\thotWaitingFilesMap[chunkId] = true;\n \t\t} else {\n \t\t\thotRequestedFilesMap[chunkId] = true;\n \t\t\thotWaitingFiles++;\n \t\t\thotDownloadUpdateChunk(chunkId);\n \t\t}\n \t}\n\n \tfunction hotUpdateDownloaded() {\n \t\thotSetStatus(\"ready\");\n \t\tvar deferred = hotDeferred;\n \t\thotDeferred = null;\n \t\tif (!deferred) return;\n \t\tif (hotApplyOnUpdate) {\n \t\t\t// Wrap deferred object in Promise to mark it as a well-handled Promise to\n \t\t\t// avoid triggering uncaught exception warning in Chrome.\n \t\t\t// See https://bugs.chromium.org/p/chromium/issues/detail?id=465666\n \t\t\tPromise.resolve()\n \t\t\t\t.then(function() {\n \t\t\t\t\treturn hotApply(hotApplyOnUpdate);\n \t\t\t\t})\n \t\t\t\t.then(\n \t\t\t\t\tfunction(result) {\n \t\t\t\t\t\tdeferred.resolve(result);\n \t\t\t\t\t},\n \t\t\t\t\tfunction(err) {\n \t\t\t\t\t\tdeferred.reject(err);\n \t\t\t\t\t}\n \t\t\t\t);\n \t\t} else {\n \t\t\tvar outdatedModules = [];\n \t\t\tfor (var id in hotUpdate) {\n \t\t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\t\toutdatedModules.push(toModuleId(id));\n \t\t\t\t}\n \t\t\t}\n \t\t\tdeferred.resolve(outdatedModules);\n \t\t}\n \t}\n\n \tfunction hotApply(options) {\n \t\tif (hotStatus !== \"ready\")\n \t\t\tthrow new Error(\"apply() is only allowed in ready status\");\n \t\toptions = options || {};\n\n \t\tvar cb;\n \t\tvar i;\n \t\tvar j;\n \t\tvar module;\n \t\tvar moduleId;\n\n \t\tfunction getAffectedStuff(updateModuleId) {\n \t\t\tvar outdatedModules = [updateModuleId];\n \t\t\tvar outdatedDependencies = {};\n\n \t\t\tvar queue = outdatedModules.slice().map(function(id) {\n \t\t\t\treturn {\n \t\t\t\t\tchain: [id],\n \t\t\t\t\tid: id\n \t\t\t\t};\n \t\t\t});\n \t\t\twhile (queue.length > 0) {\n \t\t\t\tvar queueItem = queue.pop();\n \t\t\t\tvar moduleId = queueItem.id;\n \t\t\t\tvar chain = queueItem.chain;\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (!module || module.hot._selfAccepted) continue;\n \t\t\t\tif (module.hot._selfDeclined) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"self-declined\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tif (module.hot._main) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"unaccepted\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tfor (var i = 0; i < module.parents.length; i++) {\n \t\t\t\t\tvar parentId = module.parents[i];\n \t\t\t\t\tvar parent = installedModules[parentId];\n \t\t\t\t\tif (!parent) continue;\n \t\t\t\t\tif (parent.hot._declinedDependencies[moduleId]) {\n \t\t\t\t\t\treturn {\n \t\t\t\t\t\t\ttype: \"declined\",\n \t\t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\tparentId: parentId\n \t\t\t\t\t\t};\n \t\t\t\t\t}\n \t\t\t\t\tif (outdatedModules.indexOf(parentId) !== -1) continue;\n \t\t\t\t\tif (parent.hot._acceptedDependencies[moduleId]) {\n \t\t\t\t\t\tif (!outdatedDependencies[parentId])\n \t\t\t\t\t\t\toutdatedDependencies[parentId] = [];\n \t\t\t\t\t\taddAllToSet(outdatedDependencies[parentId], [moduleId]);\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n \t\t\t\t\tdelete outdatedDependencies[parentId];\n \t\t\t\t\toutdatedModules.push(parentId);\n \t\t\t\t\tqueue.push({\n \t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\tid: parentId\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t}\n\n \t\t\treturn {\n \t\t\t\ttype: \"accepted\",\n \t\t\t\tmoduleId: updateModuleId,\n \t\t\t\toutdatedModules: outdatedModules,\n \t\t\t\toutdatedDependencies: outdatedDependencies\n \t\t\t};\n \t\t}\n\n \t\tfunction addAllToSet(a, b) {\n \t\t\tfor (var i = 0; i < b.length; i++) {\n \t\t\t\tvar item = b[i];\n \t\t\t\tif (a.indexOf(item) === -1) a.push(item);\n \t\t\t}\n \t\t}\n\n \t\t// at begin all updates modules are outdated\n \t\t// the \"outdated\" status can propagate to parents if they don't accept the children\n \t\tvar outdatedDependencies = {};\n \t\tvar outdatedModules = [];\n \t\tvar appliedUpdate = {};\n\n \t\tvar warnUnexpectedRequire = function warnUnexpectedRequire() {\n \t\t\tconsole.warn(\n \t\t\t\t\"[HMR] unexpected require(\" + result.moduleId + \") to disposed module\"\n \t\t\t);\n \t\t};\n\n \t\tfor (var id in hotUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\tmoduleId = toModuleId(id);\n \t\t\t\t/** @type {TODO} */\n \t\t\t\tvar result;\n \t\t\t\tif (hotUpdate[id]) {\n \t\t\t\t\tresult = getAffectedStuff(moduleId);\n \t\t\t\t} else {\n \t\t\t\t\tresult = {\n \t\t\t\t\t\ttype: \"disposed\",\n \t\t\t\t\t\tmoduleId: id\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\t/** @type {Error|false} */\n \t\t\t\tvar abortError = false;\n \t\t\t\tvar doApply = false;\n \t\t\t\tvar doDispose = false;\n \t\t\t\tvar chainInfo = \"\";\n \t\t\t\tif (result.chain) {\n \t\t\t\t\tchainInfo = \"\\nUpdate propagation: \" + result.chain.join(\" -> \");\n \t\t\t\t}\n \t\t\t\tswitch (result.type) {\n \t\t\t\t\tcase \"self-declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of self decline: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of declined dependency: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\t\" in \" +\n \t\t\t\t\t\t\t\t\tresult.parentId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"unaccepted\":\n \t\t\t\t\t\tif (options.onUnaccepted) options.onUnaccepted(result);\n \t\t\t\t\t\tif (!options.ignoreUnaccepted)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because \" + moduleId + \" is not accepted\" + chainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"accepted\":\n \t\t\t\t\t\tif (options.onAccepted) options.onAccepted(result);\n \t\t\t\t\t\tdoApply = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"disposed\":\n \t\t\t\t\t\tif (options.onDisposed) options.onDisposed(result);\n \t\t\t\t\t\tdoDispose = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tdefault:\n \t\t\t\t\t\tthrow new Error(\"Unexception type \" + result.type);\n \t\t\t\t}\n \t\t\t\tif (abortError) {\n \t\t\t\t\thotSetStatus(\"abort\");\n \t\t\t\t\treturn Promise.reject(abortError);\n \t\t\t\t}\n \t\t\t\tif (doApply) {\n \t\t\t\t\tappliedUpdate[moduleId] = hotUpdate[moduleId];\n \t\t\t\t\taddAllToSet(outdatedModules, result.outdatedModules);\n \t\t\t\t\tfor (moduleId in result.outdatedDependencies) {\n \t\t\t\t\t\tif (\n \t\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(\n \t\t\t\t\t\t\t\tresult.outdatedDependencies,\n \t\t\t\t\t\t\t\tmoduleId\n \t\t\t\t\t\t\t)\n \t\t\t\t\t\t) {\n \t\t\t\t\t\t\tif (!outdatedDependencies[moduleId])\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId] = [];\n \t\t\t\t\t\t\taddAllToSet(\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId],\n \t\t\t\t\t\t\t\tresult.outdatedDependencies[moduleId]\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tif (doDispose) {\n \t\t\t\t\taddAllToSet(outdatedModules, [result.moduleId]);\n \t\t\t\t\tappliedUpdate[moduleId] = warnUnexpectedRequire;\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Store self accepted outdated modules to require them later by the module system\n \t\tvar outdatedSelfAcceptedModules = [];\n \t\tfor (i = 0; i < outdatedModules.length; i++) {\n \t\t\tmoduleId = outdatedModules[i];\n \t\t\tif (\n \t\t\t\tinstalledModules[moduleId] &&\n \t\t\t\tinstalledModules[moduleId].hot._selfAccepted\n \t\t\t)\n \t\t\t\toutdatedSelfAcceptedModules.push({\n \t\t\t\t\tmodule: moduleId,\n \t\t\t\t\terrorHandler: installedModules[moduleId].hot._selfAccepted\n \t\t\t\t});\n \t\t}\n\n \t\t// Now in \"dispose\" phase\n \t\thotSetStatus(\"dispose\");\n \t\tObject.keys(hotAvailableFilesMap).forEach(function(chunkId) {\n \t\t\tif (hotAvailableFilesMap[chunkId] === false) {\n \t\t\t\thotDisposeChunk(chunkId);\n \t\t\t}\n \t\t});\n\n \t\tvar idx;\n \t\tvar queue = outdatedModules.slice();\n \t\twhile (queue.length > 0) {\n \t\t\tmoduleId = queue.pop();\n \t\t\tmodule = installedModules[moduleId];\n \t\t\tif (!module) continue;\n\n \t\t\tvar data = {};\n\n \t\t\t// Call dispose handlers\n \t\t\tvar disposeHandlers = module.hot._disposeHandlers;\n \t\t\tfor (j = 0; j < disposeHandlers.length; j++) {\n \t\t\t\tcb = disposeHandlers[j];\n \t\t\t\tcb(data);\n \t\t\t}\n \t\t\thotCurrentModuleData[moduleId] = data;\n\n \t\t\t// disable module (this disables requires from this module)\n \t\t\tmodule.hot.active = false;\n\n \t\t\t// remove module from cache\n \t\t\tdelete installedModules[moduleId];\n\n \t\t\t// when disposing there is no need to call dispose handler\n \t\t\tdelete outdatedDependencies[moduleId];\n\n \t\t\t// remove \"parents\" references from all children\n \t\t\tfor (j = 0; j < module.children.length; j++) {\n \t\t\t\tvar child = installedModules[module.children[j]];\n \t\t\t\tif (!child) continue;\n \t\t\t\tidx = child.parents.indexOf(moduleId);\n \t\t\t\tif (idx >= 0) {\n \t\t\t\t\tchild.parents.splice(idx, 1);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// remove outdated dependency from module children\n \t\tvar dependency;\n \t\tvar moduleOutdatedDependencies;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tfor (j = 0; j < moduleOutdatedDependencies.length; j++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[j];\n \t\t\t\t\t\tidx = module.children.indexOf(dependency);\n \t\t\t\t\t\tif (idx >= 0) module.children.splice(idx, 1);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Not in \"apply\" phase\n \t\thotSetStatus(\"apply\");\n\n \t\thotCurrentHash = hotUpdateNewHash;\n\n \t\t// insert new code\n \t\tfor (moduleId in appliedUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {\n \t\t\t\tmodules[moduleId] = appliedUpdate[moduleId];\n \t\t\t}\n \t\t}\n\n \t\t// call accept handlers\n \t\tvar error = null;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tvar callbacks = [];\n \t\t\t\t\tfor (i = 0; i < moduleOutdatedDependencies.length; i++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[i];\n \t\t\t\t\t\tcb = module.hot._acceptedDependencies[dependency];\n \t\t\t\t\t\tif (cb) {\n \t\t\t\t\t\t\tif (callbacks.indexOf(cb) !== -1) continue;\n \t\t\t\t\t\t\tcallbacks.push(cb);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\tfor (i = 0; i < callbacks.length; i++) {\n \t\t\t\t\t\tcb = callbacks[i];\n \t\t\t\t\t\ttry {\n \t\t\t\t\t\t\tcb(moduleOutdatedDependencies);\n \t\t\t\t\t\t} catch (err) {\n \t\t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\t\ttype: \"accept-errored\",\n \t\t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\t\tdependencyId: moduleOutdatedDependencies[i],\n \t\t\t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Load self accepted modules\n \t\tfor (i = 0; i < outdatedSelfAcceptedModules.length; i++) {\n \t\t\tvar item = outdatedSelfAcceptedModules[i];\n \t\t\tmoduleId = item.module;\n \t\t\thotCurrentParents = [moduleId];\n \t\t\ttry {\n \t\t\t\t__webpack_require__(moduleId);\n \t\t\t} catch (err) {\n \t\t\t\tif (typeof item.errorHandler === \"function\") {\n \t\t\t\t\ttry {\n \t\t\t\t\t\titem.errorHandler(err);\n \t\t\t\t\t} catch (err2) {\n \t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\ttype: \"self-accept-error-handler-errored\",\n \t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\terror: err2,\n \t\t\t\t\t\t\t\toriginalError: err\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\tif (!error) error = err2;\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\ttype: \"self-accept-errored\",\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t});\n \t\t\t\t\t}\n \t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// handle errors in accept handlers and self accepted module load\n \t\tif (error) {\n \t\t\thotSetStatus(\"fail\");\n \t\t\treturn Promise.reject(error);\n \t\t}\n\n \t\thotSetStatus(\"idle\");\n \t\treturn new Promise(function(resolve) {\n \t\t\tresolve(outdatedModules);\n \t\t});\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {},\n \t\t\thot: hotCreateModule(moduleId),\n \t\t\tparents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),\n \t\t\tchildren: []\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// __webpack_hash__\n \t__webpack_require__.h = function() { return hotCurrentHash; };\n\n\n \t// Load entry module and return exports\n \treturn hotCreateRequire(8)(__webpack_require__.s = 8);\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"body {\\r\\n  background-color: #000;\\r\\n  margin: 0px;\\r\\n  overflow: hidden;\\r\\n  color: white;\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\na {\\r\\n  color: white;\\r\\n}\\r\\na:hover{\\r\\n  color: red;\\r\\n}\\r\\n\\r\\n.title {\\r\\n  position: absolute;\\r\\n  width: 100%;\\r\\n  z-index: 1;\\r\\n  font-size: 1.5rem;\\r\\n}\\r\\n\\r\\n#container {\\r\\n  position: absolute;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n}\\r\\n\\r\\n#controls {\\r\\n  position: absolute;\\r\\n  width: 20rem;\\r\\n  height: 100%;\\r\\n  top: 5rem;\\r\\n  right: 1rem;\\r\\n  z-index: 1;\\r\\n  text-align: right;\\r\\n}\\r\\n\\r\\nspan, input, select {\\r\\n  margin-bottom: 1rem;\\r\\n}\\r\\n\\r\\n/* .hello {\\r\\n  color: blue;\\r\\n  background: url('./cows.jpg');\\r\\n} */\", \"\"]);\n\n","module.exports = __webpack_public_path__ + \"9322108192799f62ede122373939ec6f.glb\";","module.exports = __webpack_public_path__ + \"c756bd7acb05f289d8efa3c92b129ef8.glb\";","module.exports = __webpack_public_path__ + \"5969be5031399a57d1b6778d25cadf2a.glb\";","\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!./main.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js!./main.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/dist/cjs.js!./main.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return '@media ' + item[2] + '{' + content + '}';\n      } else {\n        return content;\n      }\n    }).join('');\n  }; // import a list of modules into the list\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (i = 0; i < modules.length; i++) {\n      var item = modules[i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = '(' + item[2] + ') and (' + mediaQuery + ')';\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || '';\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n  return '/*# ' + data + ' */';\n}","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","/**\r\n * @author qiao / https://github.com/qiao\r\n * @author mrdoob / http://mrdoob.com\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author erich666 / http://erichaines.com\r\n */\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one-finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\r\n\r\nimport {\r\n\tEventDispatcher,\r\n\tMOUSE,\r\n\tQuaternion,\r\n\tSpherical,\r\n\tVector2,\r\n\tVector3\r\n} from \"../three.module.js\";\r\n\r\nvar OrbitControls = function ( object, domElement ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n\t// Set to false to disable this control\r\n\tthis.enabled = true;\r\n\r\n\t// \"target\" sets the location of focus, where the object orbits around\r\n\tthis.target = new Vector3();\r\n\r\n\t// How far you can dolly in and out ( PerspectiveCamera only )\r\n\tthis.minDistance = 0;\r\n\tthis.maxDistance = Infinity;\r\n\r\n\t// How far you can zoom in and out ( OrthographicCamera only )\r\n\tthis.minZoom = 0;\r\n\tthis.maxZoom = Infinity;\r\n\r\n\t// How far you can orbit vertically, upper and lower limits.\r\n\t// Range is 0 to Math.PI radians.\r\n\tthis.minPolarAngle = 0; // radians\r\n\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t// How far you can orbit horizontally, upper and lower limits.\r\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n\tthis.minAzimuthAngle = - Infinity; // radians\r\n\tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n\t// Set to true to enable damping (inertia)\r\n\t// If damping is enabled, you must call controls.update() in your animation loop\r\n\tthis.enableDamping = false;\r\n\tthis.dampingFactor = 0.25;\r\n\r\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n\t// Set to false to disable zooming\r\n\tthis.enableZoom = true;\r\n\tthis.zoomSpeed = 1.0;\r\n\r\n\t// Set to false to disable rotating\r\n\tthis.enableRotate = true;\r\n\tthis.rotateSpeed = 1.0;\r\n\r\n\t// Set to false to disable panning\r\n\tthis.enablePan = true;\r\n\tthis.panSpeed = 1.0;\r\n\tthis.screenSpacePanning = false; // if true, pan in screen-space\r\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n\t// Set to true to automatically rotate around the target\r\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\tthis.autoRotate = false;\r\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n\t// Set to false to disable use of the keys\r\n\tthis.enableKeys = true;\r\n\r\n\t// The four arrow keys\r\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\r\n\r\n\t// Mouse buttons\r\n\tthis.mouseButtons = { LEFT: MOUSE.LEFT, MIDDLE: MOUSE.MIDDLE, RIGHT: MOUSE.RIGHT };\r\n\r\n\t// for reset\r\n\tthis.target0 = this.target.clone();\r\n\tthis.position0 = this.object.position.clone();\r\n\tthis.zoom0 = this.object.zoom;\r\n\r\n\t//\r\n\t// public methods\r\n\t//\r\n\r\n\tthis.getPolarAngle = function () {\r\n\r\n\t\treturn spherical.phi;\r\n\r\n\t};\r\n\r\n\tthis.getAzimuthalAngle = function () {\r\n\r\n\t\treturn spherical.theta;\r\n\r\n\t};\r\n\r\n\tthis.saveState = function () {\r\n\r\n\t\tscope.target0.copy( scope.target );\r\n\t\tscope.position0.copy( scope.object.position );\r\n\t\tscope.zoom0 = scope.object.zoom;\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tscope.target.copy( scope.target0 );\r\n\t\tscope.object.position.copy( scope.position0 );\r\n\t\tscope.object.zoom = scope.zoom0;\r\n\r\n\t\tscope.object.updateProjectionMatrix();\r\n\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\tscope.update();\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t};\r\n\r\n\t// this method is exposed, but perhaps it would be better if we can make it private...\r\n\tthis.update = function () {\r\n\r\n\t\tvar offset = new Vector3();\r\n\r\n\t\t// so camera.up is the orbit axis\r\n\t\tvar quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\r\n\t\tvar quatInverse = quat.clone().inverse();\r\n\r\n\t\tvar lastPosition = new Vector3();\r\n\t\tvar lastQuaternion = new Quaternion();\r\n\r\n\t\treturn function update() {\r\n\r\n\t\t\tvar position = scope.object.position;\r\n\r\n\t\t\toffset.copy( position ).sub( scope.target );\r\n\r\n\t\t\t// rotate offset to \"y-axis-is-up\" space\r\n\t\t\toffset.applyQuaternion( quat );\r\n\r\n\t\t\t// angle from z-axis around y-axis\r\n\t\t\tspherical.setFromVector3( offset );\r\n\r\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n\t\t\t\trotateLeft( getAutoRotationAngle() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tspherical.theta += sphericalDelta.theta;\r\n\t\t\tspherical.phi += sphericalDelta.phi;\r\n\r\n\t\t\t// restrict theta to be between desired limits\r\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\r\n\r\n\t\t\t// restrict phi to be between desired limits\r\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n\t\t\tspherical.makeSafe();\r\n\r\n\r\n\t\t\tspherical.radius *= scale;\r\n\r\n\t\t\t// restrict radius to be between desired limits\r\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n\t\t\t// move target to panned location\r\n\t\t\tscope.target.add( panOffset );\r\n\r\n\t\t\toffset.setFromSpherical( spherical );\r\n\r\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n\t\t\toffset.applyQuaternion( quatInverse );\r\n\r\n\t\t\tposition.copy( scope.target ).add( offset );\r\n\r\n\t\t\tscope.object.lookAt( scope.target );\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\r\n\r\n\t\t\t\tpanOffset.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscale = 1;\r\n\r\n\t\t\t// update condition is:\r\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n\t\t\tif ( zoomChanged ||\r\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t\tlastPosition.copy( scope.object.position );\r\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\tzoomChanged = false;\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\r\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\r\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\r\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\r\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n\t};\r\n\r\n\t//\r\n\t// internals\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tvar changeEvent = { type: 'change' };\r\n\tvar startEvent = { type: 'start' };\r\n\tvar endEvent = { type: 'end' };\r\n\r\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY_PAN: 4 };\r\n\r\n\tvar state = STATE.NONE;\r\n\r\n\tvar EPS = 0.000001;\r\n\r\n\t// current position in spherical coordinates\r\n\tvar spherical = new Spherical();\r\n\tvar sphericalDelta = new Spherical();\r\n\r\n\tvar scale = 1;\r\n\tvar panOffset = new Vector3();\r\n\tvar zoomChanged = false;\r\n\r\n\tvar rotateStart = new Vector2();\r\n\tvar rotateEnd = new Vector2();\r\n\tvar rotateDelta = new Vector2();\r\n\r\n\tvar panStart = new Vector2();\r\n\tvar panEnd = new Vector2();\r\n\tvar panDelta = new Vector2();\r\n\r\n\tvar dollyStart = new Vector2();\r\n\tvar dollyEnd = new Vector2();\r\n\tvar dollyDelta = new Vector2();\r\n\r\n\tfunction getAutoRotationAngle() {\r\n\r\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n\t}\r\n\r\n\tfunction getZoomScale() {\r\n\r\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n\t}\r\n\r\n\tfunction rotateLeft( angle ) {\r\n\r\n\t\tsphericalDelta.theta -= angle;\r\n\r\n\t}\r\n\r\n\tfunction rotateUp( angle ) {\r\n\r\n\t\tsphericalDelta.phi -= angle;\r\n\r\n\t}\r\n\r\n\tvar panLeft = function () {\r\n\r\n\t\tvar v = new Vector3();\r\n\r\n\t\treturn function panLeft( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n\t\t\tv.multiplyScalar( - distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tvar panUp = function () {\r\n\r\n\t\tvar v = new Vector3();\r\n\r\n\t\treturn function panUp( distance, objectMatrix ) {\r\n\r\n\t\t\tif ( scope.screenSpacePanning === true ) {\r\n\r\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\r\n\t\t\t\tv.crossVectors( scope.object.up, v );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv.multiplyScalar( distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\t// deltaX and deltaY are in pixels; right and down are positive\r\n\tvar pan = function () {\r\n\r\n\t\tvar offset = new Vector3();\r\n\r\n\t\treturn function pan( deltaX, deltaY ) {\r\n\r\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\t\t// perspective\r\n\t\t\t\tvar position = scope.object.position;\r\n\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\t\t\t\tvar targetDistance = offset.length();\r\n\r\n\t\t\t\t// half of the fov is center to top of screen\r\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\r\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\t\t// orthographic\r\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// camera neither orthographic nor perspective\r\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n\t\t\t\tscope.enablePan = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tfunction dollyIn( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale /= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction dollyOut( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale *= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event callbacks - update the object state\r\n\t//\r\n\r\n\tfunction handleMouseDownRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownRotate' );\r\n\r\n\t\trotateStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownDolly' );\r\n\r\n\t\tdollyStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownPan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownPan' );\r\n\r\n\t\tpanStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.clientX, event.clientY );\r\n\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveDolly' );\r\n\r\n\t\tdollyEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMovePan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMovePan' );\r\n\r\n\t\tpanEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseUp( event ) {\r\n\r\n\t\t// console.log( 'handleMouseUp' );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseWheel( event ) {\r\n\r\n\t\t// console.log( 'handleMouseWheel' );\r\n\r\n\t\tif ( event.deltaY < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( event.deltaY > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleKeyDown( event ) {\r\n\r\n\t\t//console.log( 'handleKeyDown' );\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\r\n\t\t\tcase scope.keys.UP:\r\n\t\t\t\tpan( 0, scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.BOTTOM:\r\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.LEFT:\r\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.RIGHT:\r\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartRotate' );\r\n\r\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDollyPan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartDollyPan' );\r\n\r\n\t\tif ( scope.enableZoom ) {\r\n\r\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\t\tdollyStart.set( 0, distance );\r\n\r\n\t\t}\r\n\r\n\t\tif ( scope.enablePan ) {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\tpanStart.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDollyPan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveDollyPan' );\r\n\r\n\t\tif ( scope.enableZoom ) {\r\n\r\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\t\tdollyEnd.set( 0, distance );\r\n\r\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\r\n\r\n\t\t\tdollyIn( dollyDelta.y );\r\n\r\n\t\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\t}\r\n\r\n\t\tif ( scope.enablePan ) {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\tpanEnd.set( x, y );\r\n\r\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\t\tpanStart.copy( panEnd );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchEnd( event ) {\r\n\r\n\t\t//console.log( 'handleTouchEnd' );\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event handlers - FSM: listen for events and reset state\r\n\t//\r\n\r\n\tfunction onMouseDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( event.button ) {\r\n\r\n\t\t\tcase scope.mouseButtons.LEFT:\r\n\r\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\r\n\r\n\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.mouseButtons.MIDDLE:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseDownDolly( event );\r\n\r\n\t\t\t\tstate = STATE.DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.mouseButtons.RIGHT:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\r\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( state ) {\r\n\r\n\t\t\tcase STATE.ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.DOLLY:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseUp( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleMouseUp( event );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onMouseWheel( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\thandleMouseWheel( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction onKeyDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\r\n\r\n\t\thandleKeyDown( event );\r\n\r\n\t}\r\n\r\n\tfunction onTouchStart( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\t// one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchStartRotate( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\t// two-fingered touch: dolly-pan\r\n\r\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchStartDollyPan( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1: // one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?\r\n\r\n\t\t\t\thandleTouchMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2: // two-fingered touch: dolly-pan\r\n\r\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY_PAN ) return; // is this needed?\r\n\r\n\t\t\t\thandleTouchMoveDollyPan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchEnd( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleTouchEnd( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onContextMenu( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\r\n\r\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\r\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\r\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\r\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\twindow.addEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t// force an update at start\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\r\nOrbitControls.prototype.constructor = OrbitControls;\r\n\r\nObject.defineProperties( OrbitControls.prototype, {\r\n\r\n\tcenter: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\r\n\t\t\treturn this.target;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// backward compatibility\r\n\r\n\tnoZoom: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n\t\t\treturn ! this.enableZoom;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n\t\t\tthis.enableZoom = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoRotate: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n\t\t\treturn ! this.enableRotate;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n\t\t\tthis.enableRotate = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoPan: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n\t\t\treturn ! this.enablePan;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n\t\t\tthis.enablePan = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoKeys: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n\t\t\treturn ! this.enableKeys;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n\t\t\tthis.enableKeys = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tstaticMoving: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n\t\t\treturn ! this.enableDamping;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n\t\t\tthis.enableDamping = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdynamicDampingFactor: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n\t\t\treturn this.dampingFactor;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n\t\t\tthis.dampingFactor = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nexport { OrbitControls };\r\n","import {\r\n  Clock,\r\n  PerspectiveCamera,\r\n  Scene,\r\n  WebGLRenderer\r\n} from './three/three.module.js';\r\n\r\nimport {\r\n  OrbitControls\r\n} from './three/controls/OrbitControls.module.js';\r\n\r\n\r\nexport default class THREE_APP {\r\n\r\n  constructor( container ) {\r\n\r\n    container = container || '#container'; // default ID if none provided\r\n\r\n    this.container = document.querySelector( container );\r\n\r\n    if ( !this.container ) {\r\n\r\n      console.error( `Couldn't find the container element: ${container}` );\r\n\r\n      return;\r\n\r\n    }\r\n\r\n    this.scene = new Scene();\r\n    this.clock = new Clock();\r\n\r\n    this.running = false;\r\n\r\n    // make sure to set these to the values you want before calling init\r\n    // since they can't be changed without creating a new WebGLRenderer\r\n    this.alpha = false;\r\n    this.antialias = true;\r\n    this.powerPreference = 'high-performance';\r\n    this.stencil = false;\r\n\r\n    // override the three.js default of 2.0\r\n    this.gammaFactor = 2.2;\r\n\r\n    // should nearly always be true, unless using postprocessing\r\n    this.gammaOutput = true;\r\n\r\n    // this also needs to be set before calling init()\r\n    this.autoResize = true;\r\n\r\n    // set this to a value less than 3 to increase performance on low power mobile devices with high pixel ratio\r\n    this.maxPixelRatio = Infinity;\r\n\r\n    // whether or not to call the controls.update function once per frame\r\n    this.controlsAutoUpdate = true;\r\n\r\n    this.onUpdate = null;\r\n    this.onResize = null;\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n    this.initCamera();\r\n    this.initControls();\r\n    this.initRenderer();\r\n\r\n    if ( this.autoResize ) window.addEventListener( 'resize', () => this.onWindowResize() );\r\n\r\n  }\r\n\r\n  initCamera() {\r\n\r\n    if ( !this.camera ) this.camera = new PerspectiveCamera( 35, this.container.clientWidth / this.container.clientHeight, 1, 1000 );\r\n\r\n  }\r\n\r\n  initControls() {\r\n\r\n    // allow custom controls to be set up\r\n    if ( this.controls ) return;\r\n\r\n    // if the controls script was loaded, we'll set them up\r\n    if ( typeof OrbitControls === 'function' ) this.controls = new OrbitControls( this.camera, this.container );\r\n\r\n    // otherwise we'll skip them\r\n    else return;\r\n\r\n    // gives the controls a feeling of \"weight\"\r\n    this.controls.enableDamping = true;\r\n\r\n  }\r\n\r\n  initRenderer() {\r\n\r\n    // allow custom renderer to be set up\r\n    if ( this.renderer ) return;\r\n\r\n    this.renderer = new WebGLRenderer( {\r\n      powerPreference: this.powerPreference,\r\n      alpha: this.alpha,\r\n      antialias: this.antialias,\r\n      stencil: this.stencil,\r\n    } );\r\n\r\n    this.renderer.setSize( this.container.clientWidth, this.container.clientHeight );\r\n    this.renderer.setPixelRatio( Math.min( window.devicePixelRatio, this.maxPixelRatio ) );\r\n\r\n    this.renderer.gammaFactor = this.gammaFactor;\r\n\r\n    // note that changing this after rendering the scene won't work\r\n    this.renderer.gammaOutput = this.gammaOutput;\r\n\r\n    // to avoid page pulling\r\n    this.renderer.domElement.addEventListener( 'touchstart', e => e.preventDefault() );\r\n\r\n    this.container.appendChild( this.renderer.domElement );\r\n\r\n  }\r\n\r\n  render() {\r\n\r\n    this.renderer.render( this.scene, this.camera );\r\n\r\n  }\r\n\r\n  update() {\r\n\r\n    const delta = this.clock.getDelta();\r\n\r\n    if ( this.controlsAutoUpdate && this.controls && this.controls.update ) this.controls.update( delta );\r\n\r\n    // step through the scene and call custom onUpdate functions on any object\r\n    // for which we have defined them\r\n    this.scene.traverse( ( child ) => {\r\n\r\n      if ( child.userData.onUpdate ) child.userData.onUpdate( delta );\r\n\r\n    } );\r\n\r\n    if ( this.onUpdate ) this.onUpdate( delta );\r\n\r\n  }\r\n\r\n  start() {\r\n\r\n    // clear previous delta to prevent large delta values when\r\n    // starting and stopping the app\r\n    this.clock.getDelta();\r\n\r\n    this.renderer.setAnimationLoop( () => {\r\n\r\n      this.update();\r\n      this.render();\r\n\r\n    } );\r\n\r\n    this.running = true;\r\n\r\n  }\r\n\r\n  stop() {\r\n\r\n    this.renderer.setAnimationLoop( null );\r\n\r\n    this.running = false;\r\n\r\n  }\r\n\r\n  onWindowResize() {\r\n\r\n    if( !this.autoResize ) return;\r\n\r\n    this.camera.aspect = this.container.clientWidth / this.container.clientHeight;\r\n\r\n    this.camera.updateProjectionMatrix();\r\n\r\n    this.renderer.setSize( this.container.clientWidth, this.container.clientHeight );\r\n    this.renderer.setPixelRatio( Math.min( window.devicePixelRatio, this.maxPixelRatio ) );\r\n\r\n    // render an extra frame to prevent jank\r\n    this.renderer.render( this.scene, this.camera );\r\n\r\n    if ( this.onResize ) this.onResize();\r\n\r\n  }\r\n\r\n}\r\n","/**\r\n * @author Rich Tibbett / https://github.com/richtr\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author Tony Parisi / http://www.tonyparisi.com/\r\n * @author Takahiro / https://github.com/takahirox\r\n * @author Don McCurdy / https://www.donmccurdy.com\r\n */\r\n\r\nimport {\r\n\tAddEquation,\r\n\tAlwaysDepth,\r\n\tAnimationClip,\r\n\tAnimationUtils,\r\n\tBackSide,\r\n\tBone,\r\n\tBufferAttribute,\r\n\tBufferGeometry,\r\n\tCamera,\r\n\tClampToEdgeWrapping,\r\n\tColor,\r\n\tDefaultLoadingManager,\r\n\tDirectionalLight,\r\n\tDoubleSide,\r\n\tDstAlphaFactor,\r\n\tDstColorFactor,\r\n\tEqualDepth,\r\n\tFileLoader,\r\n\tFrontSide,\r\n\tGreaterEqualDepth,\r\n\tGroup,\r\n\tInterleavedBuffer,\r\n\tInterleavedBufferAttribute,\r\n\tInterpolant,\r\n\tInterpolateDiscrete,\r\n\tInterpolateLinear,\r\n\tInterpolateSmooth,\r\n\tLessDepth,\r\n\tLessEqualDepth,\r\n\tLine,\r\n\tLineBasicMaterial,\r\n\tLineLoop,\r\n\tLineSegments,\r\n\tLinearFilter,\r\n\tLinearMipMapLinearFilter,\r\n\tLinearMipMapNearestFilter,\r\n\tLoader,\r\n\tLoaderUtils,\r\n\tMaterial,\r\n\tMath,\r\n\tMatrix3,\r\n\tMatrix4,\r\n\tMesh,\r\n\tMeshBasicMaterial,\r\n\tMeshStandardMaterial,\r\n\tMirroredRepeatWrapping,\r\n\tNearestFilter,\r\n\tNearestMipMapLinearFilter,\r\n\tNearestMipMapNearestFilter,\r\n\tNeverDepth,\r\n\tNotEqualDepth,\r\n\tNumberKeyframeTrack,\r\n\tObject3D,\r\n\tOneFactor,\r\n\tOneMinusDstAlphaFactor,\r\n\tOneMinusDstColorFactor,\r\n\tOneMinusSrcAlphaFactor,\r\n\tOneMinusSrcColorFactor,\r\n\tOrthographicCamera,\r\n\tPerspectiveCamera,\r\n\tPointLight,\r\n\tPoints,\r\n\tPointsMaterial,\r\n\tPropertyBinding,\r\n\tQuaternionKeyframeTrack,\r\n\tRGBAFormat,\r\n\tRGBFormat,\r\n\tRepeatWrapping,\r\n\tReverseSubtractEquation,\r\n\tScene,\r\n\tShaderLib,\r\n\tShaderMaterial,\r\n\tSkeleton,\r\n\tSkinnedMesh,\r\n\tSpotLight,\r\n\tSrcAlphaFactor,\r\n\tSrcAlphaSaturateFactor,\r\n\tSrcColorFactor,\r\n\tSubtractEquation,\r\n\tTexture,\r\n\tTextureLoader,\r\n\tTriangleFanDrawMode,\r\n\tTriangleStripDrawMode,\r\n\tUniformsUtils,\r\n\tVector2,\r\n\tVector3,\r\n\tVector4,\r\n\tVectorKeyframeTrack,\r\n\tVertexColors,\r\n\tZeroFactor,\r\n\tsRGBEncoding\r\n} from \"../three.module.js\";\r\n\r\nvar GLTFLoader = ( function () {\r\n\r\n\tfunction GLTFLoader( manager ) {\r\n\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\t\tthis.dracoLoader = null;\r\n\r\n\t}\r\n\r\n\tGLTFLoader.prototype = {\r\n\r\n\t\tconstructor: GLTFLoader,\r\n\r\n\t\tcrossOrigin: 'anonymous',\r\n\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\t\tvar scope = this;\r\n\r\n\t\t\tvar resourcePath;\r\n\r\n\t\t\tif ( this.resourcePath !== undefined ) {\r\n\r\n\t\t\t\tresourcePath = this.resourcePath;\r\n\r\n\t\t\t} else if ( this.path !== undefined ) {\r\n\r\n\t\t\t\tresourcePath = this.path;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Tells the LoadingManager to track an extra item, which resolves after\r\n\t\t\t// the model is fully loaded. This means the count of items loaded will\r\n\t\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tvar _onError = function ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar loader = new FileLoader( scope.manager );\r\n\r\n\t\t\tloader.setPath( this.path );\r\n\t\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\t\tloader.load( url, function ( data ) {\r\n\r\n\t\t\t\ttry {\r\n\r\n\t\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\r\n\r\n\t\t\t\t\t\tonLoad( gltf );\r\n\r\n\t\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t\t}, _onError );\r\n\r\n\t\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\t\t_onError( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, onProgress, _onError );\r\n\r\n\t\t},\r\n\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\t\tthis.crossOrigin = value;\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetPath: function ( value ) {\r\n\r\n\t\t\tthis.path = value;\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetResourcePath: function ( value ) {\r\n\r\n\t\t\tthis.resourcePath = value;\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetDRACOLoader: function ( dracoLoader ) {\r\n\r\n\t\t\tthis.dracoLoader = dracoLoader;\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tparse: function ( data, path, onLoad, onError ) {\r\n\r\n\t\t\tvar content;\r\n\t\t\tvar extensions = {};\r\n\r\n\t\t\tif ( typeof data === 'string' ) {\r\n\r\n\t\t\t\tcontent = data;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\r\n\r\n\t\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\r\n\r\n\t\t\t\t\ttry {\r\n\r\n\t\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\r\n\r\n\t\t\t\t\t} catch ( error ) {\r\n\r\n\t\t\t\t\t\tif ( onError ) onError( error );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar json = JSON.parse( content );\r\n\r\n\t\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\r\n\r\n\t\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.' ) );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.extensionsUsed ) {\r\n\r\n\t\t\t\tfor ( var i = 0; i < json.extensionsUsed.length; ++ i ) {\r\n\r\n\t\t\t\t\tvar extensionName = json.extensionsUsed[ i ];\r\n\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\r\n\r\n\t\t\t\t\tswitch ( extensionName ) {\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_LIGHTS_PUNCTUAL:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFLightsExtension( json );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension( json );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension( json );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.MSFT_TEXTURE_DDS:\r\n\t\t\t\t\t\t\textensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] = new GLTFTextureDDSExtension( json );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\r\n\t\t\t\t\t\t\textensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] = new GLTFTextureTransformExtension( json );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 ) {\r\n\r\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar parser = new GLTFParser( json, extensions, {\r\n\r\n\t\t\t\tpath: path || this.resourcePath || '',\r\n\t\t\t\tcrossOrigin: this.crossOrigin,\r\n\t\t\t\tmanager: this.manager\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tparser.parse( function ( scene, scenes, cameras, animations, json ) {\r\n\r\n\t\t\t\tvar glTF = {\r\n\t\t\t\t\tscene: scene,\r\n\t\t\t\t\tscenes: scenes,\r\n\t\t\t\t\tcameras: cameras,\r\n\t\t\t\t\tanimations: animations,\r\n\t\t\t\t\tasset: json.asset,\r\n\t\t\t\t\tparser: parser,\r\n\t\t\t\t\tuserData: {}\r\n\t\t\t\t};\r\n\r\n\t\t\t\taddUnknownExtensionsToUserData( extensions, glTF, json );\r\n\r\n\t\t\t\tonLoad( glTF );\r\n\r\n\t\t\t}, onError );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t/* GLTFREGISTRY */\r\n\r\n\tfunction GLTFRegistry() {\r\n\r\n\t\tvar objects = {};\r\n\r\n\t\treturn\t{\r\n\r\n\t\t\tget: function ( key ) {\r\n\r\n\t\t\t\treturn objects[ key ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tadd: function ( key, object ) {\r\n\r\n\t\t\t\tobjects[ key ] = object;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tremove: function ( key ) {\r\n\r\n\t\t\t\tdelete objects[ key ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tremoveAll: function () {\r\n\r\n\t\t\t\tobjects = {};\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t/*********************************/\r\n\t/********** EXTENSIONS ***********/\r\n\t/*********************************/\r\n\r\n\tvar EXTENSIONS = {\r\n\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\r\n\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\r\n\t\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\r\n\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\r\n\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\r\n\t\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\r\n\t\tMSFT_TEXTURE_DDS: 'MSFT_texture_dds'\r\n\t};\r\n\r\n\t/**\r\n\t * DDS Texture Extension\r\n\t *\r\n\t * Specification:\r\n\t * https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\r\n\t *\r\n\t */\r\n\tfunction GLTFTextureDDSExtension() {\r\n\r\n\t\tif ( ! THREE.DDSLoader ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.name = EXTENSIONS.MSFT_TEXTURE_DDS;\r\n\t\tthis.ddsLoader = new THREE.DDSLoader();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Lights Extension\r\n\t *\r\n\t * Specification: PENDING\r\n\t */\r\n\tfunction GLTFLightsExtension( json ) {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\r\n\r\n\t\tvar extension = ( json.extensions && json.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ] ) || {};\r\n\t\tthis.lightDefs = extension.lights || [];\r\n\r\n\t}\r\n\r\n\tGLTFLightsExtension.prototype.loadLight = function ( lightIndex ) {\r\n\r\n\t\tvar lightDef = this.lightDefs[ lightIndex ];\r\n\t\tvar lightNode;\r\n\r\n\t\tvar color = new Color( 0xffffff );\r\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\r\n\r\n\t\tvar range = lightDef.range !== undefined ? lightDef.range : 0;\r\n\r\n\t\tswitch ( lightDef.type ) {\r\n\r\n\t\t\tcase 'directional':\r\n\t\t\t\tlightNode = new DirectionalLight( color );\r\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\r\n\t\t\t\tlightNode.add( lightNode.target );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'point':\r\n\t\t\t\tlightNode = new PointLight( color );\r\n\t\t\t\tlightNode.distance = range;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'spot':\r\n\t\t\t\tlightNode = new SpotLight( color );\r\n\t\t\t\tlightNode.distance = range;\r\n\t\t\t\t// Handle spotlight properties.\r\n\t\t\t\tlightDef.spot = lightDef.spot || {};\r\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\r\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\r\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\r\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\r\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\r\n\t\t\t\tlightNode.add( lightNode.target );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type, \"' + lightDef.type + '\".' );\r\n\r\n\t\t}\r\n\r\n\t\tlightNode.decay = 2;\r\n\r\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\r\n\r\n\t\tlightNode.name = lightDef.name || ( 'light_' + lightIndex );\r\n\r\n\t\treturn Promise.resolve( lightNode );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Unlit Materials Extension (pending)\r\n\t *\r\n\t * PR: https://github.com/KhronosGroup/glTF/pull/1163\r\n\t */\r\n\tfunction GLTFMaterialsUnlitExtension( json ) {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\r\n\r\n\t}\r\n\r\n\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function ( material ) {\r\n\r\n\t\treturn MeshBasicMaterial;\r\n\r\n\t};\r\n\r\n\tGLTFMaterialsUnlitExtension.prototype.extendParams = function ( materialParams, material, parser ) {\r\n\r\n\t\tvar pending = [];\r\n\r\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\r\n\t\tmaterialParams.opacity = 1.0;\r\n\r\n\t\tvar metallicRoughness = material.pbrMetallicRoughness;\r\n\r\n\t\tif ( metallicRoughness ) {\r\n\r\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\r\n\r\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\r\n\r\n\t\t\t\tmaterialParams.color.fromArray( array );\r\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\r\n\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending );\r\n\r\n\t};\r\n\r\n\t/* BINARY EXTENSION */\r\n\r\n\tvar BINARY_EXTENSION_BUFFER_NAME = 'binary_glTF';\r\n\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\r\n\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\r\n\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\r\n\r\n\tfunction GLTFBinaryExtension( data ) {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\r\n\t\tthis.content = null;\r\n\t\tthis.body = null;\r\n\r\n\t\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\r\n\r\n\t\tthis.header = {\r\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\r\n\t\t\tversion: headerView.getUint32( 4, true ),\r\n\t\t\tlength: headerView.getUint32( 8, true )\r\n\t\t};\r\n\r\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\r\n\r\n\t\t} else if ( this.header.version < 2.0 ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.' );\r\n\r\n\t\t}\r\n\r\n\t\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\r\n\t\tvar chunkIndex = 0;\r\n\r\n\t\twhile ( chunkIndex < chunkView.byteLength ) {\r\n\r\n\t\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\r\n\t\t\tchunkIndex += 4;\r\n\r\n\t\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\r\n\t\t\tchunkIndex += 4;\r\n\r\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\r\n\r\n\t\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\r\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\r\n\r\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\r\n\r\n\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\r\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Clients must ignore chunks with unknown types.\r\n\r\n\t\t\tchunkIndex += chunkLength;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.content === null ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * DRACO Mesh Compression Extension\r\n\t *\r\n\t * Specification: https://github.com/KhronosGroup/glTF/pull/874\r\n\t */\r\n\tfunction GLTFDracoMeshCompressionExtension( json, dracoLoader ) {\r\n\r\n\t\tif ( ! dracoLoader ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\r\n\t\tthis.json = json;\r\n\t\tthis.dracoLoader = dracoLoader;\r\n\t\tTHREE.DRACOLoader.getDecoderModule();\r\n\r\n\t}\r\n\r\n\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function ( primitive, parser ) {\r\n\r\n\t\tvar json = this.json;\r\n\t\tvar dracoLoader = this.dracoLoader;\r\n\t\tvar bufferViewIndex = primitive.extensions[ this.name ].bufferView;\r\n\t\tvar gltfAttributeMap = primitive.extensions[ this.name ].attributes;\r\n\t\tvar threeAttributeMap = {};\r\n\t\tvar attributeNormalizedMap = {};\r\n\t\tvar attributeTypeMap = {};\r\n\r\n\t\tfor ( var attributeName in gltfAttributeMap ) {\r\n\r\n\t\t\tif ( ! ( attributeName in ATTRIBUTES ) ) continue;\r\n\r\n\t\t\tthreeAttributeMap[ ATTRIBUTES[ attributeName ] ] = gltfAttributeMap[ attributeName ];\r\n\r\n\t\t}\r\n\r\n\t\tfor ( attributeName in primitive.attributes ) {\r\n\r\n\t\t\tif ( ATTRIBUTES[ attributeName ] !== undefined && gltfAttributeMap[ attributeName ] !== undefined ) {\r\n\r\n\t\t\t\tvar accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\r\n\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\r\n\r\n\t\t\t\tattributeTypeMap[ ATTRIBUTES[ attributeName ] ] = componentType;\r\n\t\t\t\tattributeNormalizedMap[ ATTRIBUTES[ attributeName ] ] = accessorDef.normalized === true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\r\n\r\n\t\t\treturn new Promise( function ( resolve ) {\r\n\r\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\r\n\r\n\t\t\t\t\tfor ( var attributeName in geometry.attributes ) {\r\n\r\n\t\t\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\r\n\t\t\t\t\t\tvar normalized = attributeNormalizedMap[ attributeName ];\r\n\r\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresolve( geometry );\r\n\r\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Texture Transform Extension\r\n\t *\r\n\t * Specification:\r\n\t */\r\n\tfunction GLTFTextureTransformExtension( json ) {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\r\n\r\n\t}\r\n\r\n\tGLTFTextureTransformExtension.prototype.extendTexture = function ( texture, transform ) {\r\n\r\n\t\ttexture = texture.clone();\r\n\r\n\t\tif ( transform.offset !== undefined ) {\r\n\r\n\t\t\ttexture.offset.fromArray( transform.offset );\r\n\r\n\t\t}\r\n\r\n\t\tif ( transform.rotation !== undefined ) {\r\n\r\n\t\t\ttexture.rotation = transform.rotation;\r\n\r\n\t\t}\r\n\r\n\t\tif ( transform.scale !== undefined ) {\r\n\r\n\t\t\ttexture.repeat.fromArray( transform.scale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( transform.texCoord !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\r\n\r\n\t\t}\r\n\r\n\t\ttexture.needsUpdate = true;\r\n\r\n\t\treturn texture;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specular-Glossiness Extension\r\n\t *\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\r\n\t */\r\n\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\r\n\r\n\t\treturn {\r\n\r\n\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\r\n\r\n\t\t\tspecularGlossinessParams: [\r\n\t\t\t\t'color',\r\n\t\t\t\t'map',\r\n\t\t\t\t'lightMap',\r\n\t\t\t\t'lightMapIntensity',\r\n\t\t\t\t'aoMap',\r\n\t\t\t\t'aoMapIntensity',\r\n\t\t\t\t'emissive',\r\n\t\t\t\t'emissiveIntensity',\r\n\t\t\t\t'emissiveMap',\r\n\t\t\t\t'bumpMap',\r\n\t\t\t\t'bumpScale',\r\n\t\t\t\t'normalMap',\r\n\t\t\t\t'displacementMap',\r\n\t\t\t\t'displacementScale',\r\n\t\t\t\t'displacementBias',\r\n\t\t\t\t'specularMap',\r\n\t\t\t\t'specular',\r\n\t\t\t\t'glossinessMap',\r\n\t\t\t\t'glossiness',\r\n\t\t\t\t'alphaMap',\r\n\t\t\t\t'envMap',\r\n\t\t\t\t'envMapIntensity',\r\n\t\t\t\t'refractionRatio',\r\n\t\t\t],\r\n\r\n\t\t\tgetMaterialType: function () {\r\n\r\n\t\t\t\treturn ShaderMaterial;\r\n\r\n\t\t\t},\r\n\r\n\t\t\textendParams: function ( params, material, parser ) {\r\n\r\n\t\t\t\tvar pbrSpecularGlossiness = material.extensions[ this.name ];\r\n\r\n\t\t\t\tvar shader = ShaderLib[ 'standard' ];\r\n\r\n\t\t\t\tvar uniforms = UniformsUtils.clone( shader.uniforms );\r\n\r\n\t\t\t\tvar specularMapParsFragmentChunk = [\r\n\t\t\t\t\t'#ifdef USE_SPECULARMAP',\r\n\t\t\t\t\t'\tuniform sampler2D specularMap;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar glossinessMapParsFragmentChunk = [\r\n\t\t\t\t\t'#ifdef USE_GLOSSINESSMAP',\r\n\t\t\t\t\t'\tuniform sampler2D glossinessMap;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar specularMapFragmentChunk = [\r\n\t\t\t\t\t'vec3 specularFactor = specular;',\r\n\t\t\t\t\t'#ifdef USE_SPECULARMAP',\r\n\t\t\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\r\n\t\t\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\r\n\t\t\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t\t\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar glossinessMapFragmentChunk = [\r\n\t\t\t\t\t'float glossinessFactor = glossiness;',\r\n\t\t\t\t\t'#ifdef USE_GLOSSINESSMAP',\r\n\t\t\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\r\n\t\t\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t\t\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar lightPhysicalFragmentChunk = [\r\n\t\t\t\t\t'PhysicalMaterial material;',\r\n\t\t\t\t\t'material.diffuseColor = diffuseColor.rgb;',\r\n\t\t\t\t\t'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );',\r\n\t\t\t\t\t'material.specularColor = specularFactor.rgb;',\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar fragmentShader = shader.fragmentShader\r\n\t\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\r\n\t\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\r\n\t\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\r\n\r\n\t\t\t\tdelete uniforms.roughness;\r\n\t\t\t\tdelete uniforms.metalness;\r\n\t\t\t\tdelete uniforms.roughnessMap;\r\n\t\t\t\tdelete uniforms.metalnessMap;\r\n\r\n\t\t\t\tuniforms.specular = { value: new Color().setHex( 0x111111 ) };\r\n\t\t\t\tuniforms.glossiness = { value: 0.5 };\r\n\t\t\t\tuniforms.specularMap = { value: null };\r\n\t\t\t\tuniforms.glossinessMap = { value: null };\r\n\r\n\t\t\t\tparams.vertexShader = shader.vertexShader;\r\n\t\t\t\tparams.fragmentShader = fragmentShader;\r\n\t\t\t\tparams.uniforms = uniforms;\r\n\t\t\t\tparams.defines = { 'STANDARD': '' };\r\n\r\n\t\t\t\tparams.color = new Color( 1.0, 1.0, 1.0 );\r\n\t\t\t\tparams.opacity = 1.0;\r\n\r\n\t\t\t\tvar pending = [];\r\n\r\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\r\n\r\n\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\r\n\r\n\t\t\t\t\tparams.color.fromArray( array );\r\n\t\t\t\t\tparams.opacity = array[ 3 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\r\n\r\n\t\t\t\t\tpending.push( parser.assignTexture( params, 'map', pbrSpecularGlossiness.diffuseTexture ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparams.emissive = new Color( 0.0, 0.0, 0.0 );\r\n\t\t\t\tparams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\r\n\t\t\t\tparams.specular = new Color( 1.0, 1.0, 1.0 );\r\n\r\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\r\n\r\n\t\t\t\t\tparams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\r\n\r\n\t\t\t\t\tvar specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\r\n\t\t\t\t\tpending.push( parser.assignTexture( params, 'glossinessMap', specGlossMapDef ) );\r\n\t\t\t\t\tpending.push( parser.assignTexture( params, 'specularMap', specGlossMapDef ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn Promise.all( pending );\r\n\r\n\t\t\t},\r\n\r\n\t\t\tcreateMaterial: function ( params ) {\r\n\r\n\t\t\t\t// setup material properties based on MeshStandardMaterial for Specular-Glossiness\r\n\r\n\t\t\t\tvar material = new ShaderMaterial( {\r\n\t\t\t\t\tdefines: params.defines,\r\n\t\t\t\t\tvertexShader: params.vertexShader,\r\n\t\t\t\t\tfragmentShader: params.fragmentShader,\r\n\t\t\t\t\tuniforms: params.uniforms,\r\n\t\t\t\t\tfog: true,\r\n\t\t\t\t\tlights: true,\r\n\t\t\t\t\topacity: params.opacity,\r\n\t\t\t\t\ttransparent: params.transparent\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tmaterial.isGLTFSpecularGlossinessMaterial = true;\r\n\r\n\t\t\t\tmaterial.color = params.color;\r\n\r\n\t\t\t\tmaterial.map = params.map === undefined ? null : params.map;\r\n\r\n\t\t\t\tmaterial.lightMap = null;\r\n\t\t\t\tmaterial.lightMapIntensity = 1.0;\r\n\r\n\t\t\t\tmaterial.aoMap = params.aoMap === undefined ? null : params.aoMap;\r\n\t\t\t\tmaterial.aoMapIntensity = 1.0;\r\n\r\n\t\t\t\tmaterial.emissive = params.emissive;\r\n\t\t\t\tmaterial.emissiveIntensity = 1.0;\r\n\t\t\t\tmaterial.emissiveMap = params.emissiveMap === undefined ? null : params.emissiveMap;\r\n\r\n\t\t\t\tmaterial.bumpMap = params.bumpMap === undefined ? null : params.bumpMap;\r\n\t\t\t\tmaterial.bumpScale = 1;\r\n\r\n\t\t\t\tmaterial.normalMap = params.normalMap === undefined ? null : params.normalMap;\r\n\t\t\t\tif ( params.normalScale ) material.normalScale = params.normalScale;\r\n\r\n\t\t\t\tmaterial.displacementMap = null;\r\n\t\t\t\tmaterial.displacementScale = 1;\r\n\t\t\t\tmaterial.displacementBias = 0;\r\n\r\n\t\t\t\tmaterial.specularMap = params.specularMap === undefined ? null : params.specularMap;\r\n\t\t\t\tmaterial.specular = params.specular;\r\n\r\n\t\t\t\tmaterial.glossinessMap = params.glossinessMap === undefined ? null : params.glossinessMap;\r\n\t\t\t\tmaterial.glossiness = params.glossiness;\r\n\r\n\t\t\t\tmaterial.alphaMap = null;\r\n\r\n\t\t\t\tmaterial.envMap = params.envMap === undefined ? null : params.envMap;\r\n\t\t\t\tmaterial.envMapIntensity = 1.0;\r\n\r\n\t\t\t\tmaterial.refractionRatio = 0.98;\r\n\r\n\t\t\t\tmaterial.extensions.derivatives = true;\r\n\r\n\t\t\t\treturn material;\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Clones a GLTFSpecularGlossinessMaterial instance. The ShaderMaterial.copy() method can\r\n\t\t\t * copy only properties it knows about or inherits, and misses many properties that would\r\n\t\t\t * normally be defined by MeshStandardMaterial.\r\n\t\t\t *\r\n\t\t\t * This method allows GLTFSpecularGlossinessMaterials to be cloned in the process of\r\n\t\t\t * loading a glTF model, but cloning later (e.g. by the user) would require these changes\r\n\t\t\t * AND also updating `.onBeforeRender` on the parent mesh.\r\n\t\t\t *\r\n\t\t\t * @param  {ShaderMaterial} source\r\n\t\t\t * @return {ShaderMaterial}\r\n\t\t\t */\r\n\t\t\tcloneMaterial: function ( source ) {\r\n\r\n\t\t\t\tvar target = source.clone();\r\n\r\n\t\t\t\ttarget.isGLTFSpecularGlossinessMaterial = true;\r\n\r\n\t\t\t\tvar params = this.specularGlossinessParams;\r\n\r\n\t\t\t\tfor ( var i = 0, il = params.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\ttarget[ params[ i ] ] = source[ params[ i ] ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn target;\r\n\r\n\t\t\t},\r\n\r\n\t\t\t// Here's based on refreshUniformsCommon() and refreshUniformsStandard() in WebGLRenderer.\r\n\t\t\trefreshUniforms: function ( renderer, scene, camera, geometry, material, group ) {\r\n\r\n\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial !== true ) {\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar uniforms = material.uniforms;\r\n\t\t\t\tvar defines = material.defines;\r\n\r\n\t\t\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t\tuniforms.diffuse.value.copy( material.color );\r\n\t\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\r\n\r\n\t\t\t\tuniforms.map.value = material.map;\r\n\t\t\t\tuniforms.specularMap.value = material.specularMap;\r\n\t\t\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t\t\tuniforms.aoMap.value = material.aoMap;\r\n\t\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\r\n\t\t\t\t// uv repeat and offset setting priorities\r\n\t\t\t\t// 1. color map\r\n\t\t\t\t// 2. specular map\r\n\t\t\t\t// 3. normal map\r\n\t\t\t\t// 4. bump map\r\n\t\t\t\t// 5. alpha map\r\n\t\t\t\t// 6. emissive map\r\n\r\n\t\t\t\tvar uvScaleMap;\r\n\r\n\t\t\t\tif ( material.map ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t\t\t} else if ( material.specularMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.specularMap;\r\n\r\n\t\t\t\t} else if ( material.displacementMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.displacementMap;\r\n\r\n\t\t\t\t} else if ( material.normalMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.normalMap;\r\n\r\n\t\t\t\t} else if ( material.bumpMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.bumpMap;\r\n\r\n\t\t\t\t} else if ( material.glossinessMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.glossinessMap;\r\n\r\n\t\t\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t\t\t} else if ( material.emissiveMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.emissiveMap;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\t\t\t// backwards compatibility\r\n\t\t\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\r\n\r\n\t\t\t\t\t\tuvScaleMap = uvScaleMap.texture;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\t\t\tuvScaleMap.updateMatrix();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( material.envMap ) {\r\n\r\n\t\t\t\t\tuniforms.envMap.value = material.envMap;\r\n\t\t\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\r\n\r\n\t\t\t\t\t// don't flip CubeTexture envMaps, flip everything else:\r\n\t\t\t\t\t//  WebGLRenderTargetCube will be flipped for backwards compatibility\r\n\t\t\t\t\t//  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\r\n\t\t\t\t\t// this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\r\n\t\t\t\t\tuniforms.flipEnvMap.value = material.envMap.isCubeTexture ? - 1 : 1;\r\n\r\n\t\t\t\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\t\t\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n\t\t\t\t\tuniforms.maxMipLevel.value = renderer.properties.get( material.envMap ).__maxMipLevel;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuniforms.specular.value.copy( material.specular );\r\n\t\t\t\tuniforms.glossiness.value = material.glossiness;\r\n\r\n\t\t\t\tuniforms.glossinessMap.value = material.glossinessMap;\r\n\r\n\t\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\t\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\r\n\t\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t\t\tif ( uniforms.glossinessMap.value !== null && defines.USE_GLOSSINESSMAP === undefined ) {\r\n\r\n\t\t\t\t\tdefines.USE_GLOSSINESSMAP = '';\r\n\t\t\t\t\t// set USE_ROUGHNESSMAP to enable vUv\r\n\t\t\t\t\tdefines.USE_ROUGHNESSMAP = '';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( uniforms.glossinessMap.value === null && defines.USE_GLOSSINESSMAP !== undefined ) {\r\n\r\n\t\t\t\t\tdelete defines.USE_GLOSSINESSMAP;\r\n\t\t\t\t\tdelete defines.USE_ROUGHNESSMAP;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t/*********************************/\r\n\t/********** INTERPOLATION ********/\r\n\t/*********************************/\r\n\r\n\t// Spline Interpolation\r\n\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\r\n\tfunction GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\t\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n\t}\r\n\r\n\tGLTFCubicSplineInterpolant.prototype = Object.create( Interpolant.prototype );\r\n\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\r\n\r\n\tGLTFCubicSplineInterpolant.prototype.copySampleValue_ = function ( index ) {\r\n\r\n\t\t// Copies a sample value to the result buffer. See description of glTF\r\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tvalueSize = this.valueSize,\r\n\t\t\toffset = index * valueSize * 3 + valueSize;\r\n\r\n\t\tfor ( var i = 0; i !== valueSize; i ++ ) {\r\n\r\n\t\t\tresult[ i ] = values[ offset + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t};\r\n\r\n\tGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\r\n\r\n\tGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\r\n\r\n\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer;\r\n\t\tvar values = this.sampleValues;\r\n\t\tvar stride = this.valueSize;\r\n\r\n\t\tvar stride2 = stride * 2;\r\n\t\tvar stride3 = stride * 3;\r\n\r\n\t\tvar td = t1 - t0;\r\n\r\n\t\tvar p = ( t - t0 ) / td;\r\n\t\tvar pp = p * p;\r\n\t\tvar ppp = pp * p;\r\n\r\n\t\tvar offset1 = i1 * stride3;\r\n\t\tvar offset0 = offset1 - stride3;\r\n\r\n\t\tvar s2 = - 2 * ppp + 3 * pp;\r\n\t\tvar s3 = ppp - pp;\r\n\t\tvar s0 = 1 - s2;\r\n\t\tvar s1 = s3 - pp + p;\r\n\r\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\r\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\r\n\t\tfor ( var i = 0; i !== stride; i ++ ) {\r\n\r\n\t\t\tvar p0 = values[ offset0 + i + stride ]; // splineVertex_k\r\n\t\t\tvar m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\r\n\t\t\tvar p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\r\n\t\t\tvar m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\r\n\r\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t};\r\n\r\n\t/*********************************/\r\n\t/********** INTERNALS ************/\r\n\t/*********************************/\r\n\r\n\t/* CONSTANTS */\r\n\r\n\tvar WEBGL_CONSTANTS = {\r\n\t\tFLOAT: 5126,\r\n\t\t//FLOAT_MAT2: 35674,\r\n\t\tFLOAT_MAT3: 35675,\r\n\t\tFLOAT_MAT4: 35676,\r\n\t\tFLOAT_VEC2: 35664,\r\n\t\tFLOAT_VEC3: 35665,\r\n\t\tFLOAT_VEC4: 35666,\r\n\t\tLINEAR: 9729,\r\n\t\tREPEAT: 10497,\r\n\t\tSAMPLER_2D: 35678,\r\n\t\tPOINTS: 0,\r\n\t\tLINES: 1,\r\n\t\tLINE_LOOP: 2,\r\n\t\tLINE_STRIP: 3,\r\n\t\tTRIANGLES: 4,\r\n\t\tTRIANGLE_STRIP: 5,\r\n\t\tTRIANGLE_FAN: 6,\r\n\t\tUNSIGNED_BYTE: 5121,\r\n\t\tUNSIGNED_SHORT: 5123\r\n\t};\r\n\r\n\tvar WEBGL_TYPE = {\r\n\t\t5126: Number,\r\n\t\t//35674: THREE.Matrix2,\r\n\t\t35675: Matrix3,\r\n\t\t35676: Matrix4,\r\n\t\t35664: Vector2,\r\n\t\t35665: Vector3,\r\n\t\t35666: Vector4,\r\n\t\t35678: Texture\r\n\t};\r\n\r\n\tvar WEBGL_COMPONENT_TYPES = {\r\n\t\t5120: Int8Array,\r\n\t\t5121: Uint8Array,\r\n\t\t5122: Int16Array,\r\n\t\t5123: Uint16Array,\r\n\t\t5125: Uint32Array,\r\n\t\t5126: Float32Array\r\n\t};\r\n\r\n\tvar WEBGL_FILTERS = {\r\n\t\t9728: NearestFilter,\r\n\t\t9729: LinearFilter,\r\n\t\t9984: NearestMipMapNearestFilter,\r\n\t\t9985: LinearMipMapNearestFilter,\r\n\t\t9986: NearestMipMapLinearFilter,\r\n\t\t9987: LinearMipMapLinearFilter\r\n\t};\r\n\r\n\tvar WEBGL_WRAPPINGS = {\r\n\t\t33071: ClampToEdgeWrapping,\r\n\t\t33648: MirroredRepeatWrapping,\r\n\t\t10497: RepeatWrapping\r\n\t};\r\n\r\n\tvar WEBGL_SIDES = {\r\n\t\t1028: BackSide, // Culling front\r\n\t\t1029: FrontSide // Culling back\r\n\t\t//1032: THREE.NoSide   // Culling front and back, what to do?\r\n\t};\r\n\r\n\tvar WEBGL_DEPTH_FUNCS = {\r\n\t\t512: NeverDepth,\r\n\t\t513: LessDepth,\r\n\t\t514: EqualDepth,\r\n\t\t515: LessEqualDepth,\r\n\t\t516: GreaterEqualDepth,\r\n\t\t517: NotEqualDepth,\r\n\t\t518: GreaterEqualDepth,\r\n\t\t519: AlwaysDepth\r\n\t};\r\n\r\n\tvar WEBGL_BLEND_EQUATIONS = {\r\n\t\t32774: AddEquation,\r\n\t\t32778: SubtractEquation,\r\n\t\t32779: ReverseSubtractEquation\r\n\t};\r\n\r\n\tvar WEBGL_BLEND_FUNCS = {\r\n\t\t0: ZeroFactor,\r\n\t\t1: OneFactor,\r\n\t\t768: SrcColorFactor,\r\n\t\t769: OneMinusSrcColorFactor,\r\n\t\t770: SrcAlphaFactor,\r\n\t\t771: OneMinusSrcAlphaFactor,\r\n\t\t772: DstAlphaFactor,\r\n\t\t773: OneMinusDstAlphaFactor,\r\n\t\t774: DstColorFactor,\r\n\t\t775: OneMinusDstColorFactor,\r\n\t\t776: SrcAlphaSaturateFactor\r\n\t\t// The followings are not supported by Three.js yet\r\n\t\t//32769: CONSTANT_COLOR,\r\n\t\t//32770: ONE_MINUS_CONSTANT_COLOR,\r\n\t\t//32771: CONSTANT_ALPHA,\r\n\t\t//32772: ONE_MINUS_CONSTANT_COLOR\r\n\t};\r\n\r\n\tvar WEBGL_TYPE_SIZES = {\r\n\t\t'SCALAR': 1,\r\n\t\t'VEC2': 2,\r\n\t\t'VEC3': 3,\r\n\t\t'VEC4': 4,\r\n\t\t'MAT2': 4,\r\n\t\t'MAT3': 9,\r\n\t\t'MAT4': 16\r\n\t};\r\n\r\n\tvar ATTRIBUTES = {\r\n\t\tPOSITION: 'position',\r\n\t\tNORMAL: 'normal',\r\n\t\tTEXCOORD_0: 'uv',\r\n\t\tTEXCOORD_1: 'uv2',\r\n\t\tCOLOR_0: 'color',\r\n\t\tWEIGHTS_0: 'skinWeight',\r\n\t\tJOINTS_0: 'skinIndex',\r\n\t};\r\n\r\n\tvar PATH_PROPERTIES = {\r\n\t\tscale: 'scale',\r\n\t\ttranslation: 'position',\r\n\t\trotation: 'quaternion',\r\n\t\tweights: 'morphTargetInfluences'\r\n\t};\r\n\r\n\tvar INTERPOLATION = {\r\n\t\tCUBICSPLINE: InterpolateSmooth, // We use custom interpolation GLTFCubicSplineInterpolation for CUBICSPLINE.\r\n\t\t                                      // KeyframeTrack.optimize() can't handle glTF Cubic Spline output values layout,\r\n\t\t                                      // using InterpolateSmooth for KeyframeTrack instantiation to prevent optimization.\r\n\t\t                                      // See KeyframeTrack.optimize() for the detail.\r\n\t\tLINEAR: InterpolateLinear,\r\n\t\tSTEP: InterpolateDiscrete\r\n\t};\r\n\r\n\tvar STATES_ENABLES = {\r\n\t\t2884: 'CULL_FACE',\r\n\t\t2929: 'DEPTH_TEST',\r\n\t\t3042: 'BLEND',\r\n\t\t3089: 'SCISSOR_TEST',\r\n\t\t32823: 'POLYGON_OFFSET_FILL',\r\n\t\t32926: 'SAMPLE_ALPHA_TO_COVERAGE'\r\n\t};\r\n\r\n\tvar ALPHA_MODES = {\r\n\t\tOPAQUE: 'OPAQUE',\r\n\t\tMASK: 'MASK',\r\n\t\tBLEND: 'BLEND'\r\n\t};\r\n\r\n\tvar MIME_TYPE_FORMATS = {\r\n\t\t'image/png': RGBAFormat,\r\n\t\t'image/jpeg': RGBFormat\r\n\t};\r\n\r\n\t/* UTILITY FUNCTIONS */\r\n\r\n\tfunction resolveURL( url, path ) {\r\n\r\n\t\t// Invalid URL\r\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\r\n\r\n\t\t// Absolute URL http://,https://,//\r\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\r\n\r\n\t\t// Data URI\r\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\r\n\r\n\t\t// Blob URL\r\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\r\n\r\n\t\t// Relative URL\r\n\t\treturn path + url;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\r\n\t */\r\n\tfunction createDefaultMaterial() {\r\n\r\n\t\treturn new MeshStandardMaterial( {\r\n\t\t\tcolor: 0xFFFFFF,\r\n\t\t\temissive: 0x000000,\r\n\t\t\tmetalness: 1,\r\n\t\t\troughness: 1,\r\n\t\t\ttransparent: false,\r\n\t\t\tdepthTest: true,\r\n\t\t\tside: FrontSide\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\r\n\r\n\t\t// Add unknown glTF extensions to an object's userData.\r\n\r\n\t\tfor ( var name in objectDef.extensions ) {\r\n\r\n\t\t\tif ( knownExtensions[ name ] === undefined ) {\r\n\r\n\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\r\n\t\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Object3D|Material|BufferGeometry} object\r\n\t * @param {GLTF.definition} gltfDef\r\n\t */\r\n\tfunction assignExtrasToUserData( object, gltfDef ) {\r\n\r\n\t\tif ( gltfDef.extras !== undefined ) {\r\n\r\n\t\t\tif ( typeof gltfDef.extras === 'object' ) {\r\n\r\n\t\t\t\tobject.userData = gltfDef.extras;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\r\n\t *\r\n\t * @param {BufferGeometry} geometry\r\n\t * @param {Array<GLTF.Target>} targets\r\n\t * @param {GLTFParser} parser\r\n\t * @return {Promise<BufferGeometry>}\r\n\t */\r\n\tfunction addMorphTargets( geometry, targets, parser ) {\r\n\r\n\t\tvar hasMorphPosition = false;\r\n\t\tvar hasMorphNormal = false;\r\n\r\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar target = targets[ i ];\r\n\r\n\t\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\r\n\t\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\r\n\r\n\t\t\tif ( hasMorphPosition && hasMorphNormal ) break;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\r\n\r\n\t\tvar pendingPositionAccessors = [];\r\n\t\tvar pendingNormalAccessors = [];\r\n\r\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar target = targets[ i ];\r\n\r\n\t\t\tif ( hasMorphPosition ) {\r\n\r\n\t\t\t\t// TODO: Error-prone use of a callback inside a loop.\r\n\t\t\t\tvar accessor = target.POSITION !== undefined\r\n\t\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\r\n\t\t\t\t\t\t.then( function ( accessor ) {\r\n\r\n\t\t\t\t\t\t\t// Cloning not to pollute original accessor below\r\n\t\t\t\t\t\t\treturn cloneBufferAttribute( accessor );\r\n\r\n\t\t\t\t\t\t} )\r\n\t\t\t\t\t: geometry.attributes.position;\r\n\r\n\t\t\t\tpendingPositionAccessors.push( accessor );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasMorphNormal ) {\r\n\r\n\t\t\t\t// TODO: Error-prone use of a callback inside a loop.\r\n\t\t\t\tvar accessor = target.NORMAL !== undefined\r\n\t\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\r\n\t\t\t\t\t\t.then( function ( accessor ) {\r\n\r\n\t\t\t\t\t\t\treturn cloneBufferAttribute( accessor );\r\n\r\n\t\t\t\t\t\t} )\r\n\t\t\t\t\t: geometry.attributes.normal;\r\n\r\n\t\t\t\tpendingNormalAccessors.push( accessor );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( [\r\n\t\t\tPromise.all( pendingPositionAccessors ),\r\n\t\t\tPromise.all( pendingNormalAccessors )\r\n\t\t] ).then( function ( accessors ) {\r\n\r\n\t\t\tvar morphPositions = accessors[ 0 ];\r\n\t\t\tvar morphNormals = accessors[ 1 ];\r\n\r\n\t\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar target = targets[ i ];\r\n\t\t\t\tvar attributeName = 'morphTarget' + i;\r\n\r\n\t\t\t\tif ( hasMorphPosition ) {\r\n\r\n\t\t\t\t\t// Three.js morph position is absolute value. The formula is\r\n\t\t\t\t\t//   basePosition\r\n\t\t\t\t\t//     + weight0 * ( morphPosition0 - basePosition )\r\n\t\t\t\t\t//     + weight1 * ( morphPosition1 - basePosition )\r\n\t\t\t\t\t//     ...\r\n\t\t\t\t\t// while the glTF one is relative\r\n\t\t\t\t\t//   basePosition\r\n\t\t\t\t\t//     + weight0 * glTFmorphPosition0\r\n\t\t\t\t\t//     + weight1 * glTFmorphPosition1\r\n\t\t\t\t\t//     ...\r\n\t\t\t\t\t// then we need to convert from relative to absolute here.\r\n\r\n\t\t\t\t\tif ( target.POSITION !== undefined ) {\r\n\r\n\t\t\t\t\t\tvar positionAttribute = morphPositions[ i ];\r\n\t\t\t\t\t\tpositionAttribute.name = attributeName;\r\n\r\n\t\t\t\t\t\tvar position = geometry.attributes.position;\r\n\r\n\t\t\t\t\t\tfor ( var j = 0, jl = positionAttribute.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tpositionAttribute.setXYZ(\r\n\t\t\t\t\t\t\t\tj,\r\n\t\t\t\t\t\t\t\tpositionAttribute.getX( j ) + position.getX( j ),\r\n\t\t\t\t\t\t\t\tpositionAttribute.getY( j ) + position.getY( j ),\r\n\t\t\t\t\t\t\t\tpositionAttribute.getZ( j ) + position.getZ( j )\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( hasMorphNormal ) {\r\n\r\n\t\t\t\t\t// see target.POSITION's comment\r\n\r\n\t\t\t\t\tif ( target.NORMAL !== undefined ) {\r\n\r\n\t\t\t\t\t\tvar normalAttribute = morphNormals[ i ];\r\n\t\t\t\t\t\tnormalAttribute.name = attributeName;\r\n\r\n\t\t\t\t\t\tvar normal = geometry.attributes.normal;\r\n\r\n\t\t\t\t\t\tfor ( var j = 0, jl = normalAttribute.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tnormalAttribute.setXYZ(\r\n\t\t\t\t\t\t\t\tj,\r\n\t\t\t\t\t\t\t\tnormalAttribute.getX( j ) + normal.getX( j ),\r\n\t\t\t\t\t\t\t\tnormalAttribute.getY( j ) + normal.getY( j ),\r\n\t\t\t\t\t\t\t\tnormalAttribute.getZ( j ) + normal.getZ( j )\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\r\n\t\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\r\n\r\n\t\t\treturn geometry;\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Mesh} mesh\r\n\t * @param {GLTF.Mesh} meshDef\r\n\t */\r\n\tfunction updateMorphTargets( mesh, meshDef ) {\r\n\r\n\t\tmesh.updateMorphTargets();\r\n\r\n\t\tif ( meshDef.weights !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\r\n\t\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\r\n\r\n\t\t\tvar targetNames = meshDef.extras.targetNames;\r\n\r\n\t\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\r\n\r\n\t\t\t\tmesh.morphTargetDictionary = {};\r\n\r\n\t\t\t\tfor ( var i = 0, il = targetNames.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction isPrimitiveEqual( a, b ) {\r\n\r\n\t\tvar dracoExtA = a.extensions ? a.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] : undefined;\r\n\t\tvar dracoExtB = b.extensions ? b.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] : undefined;\r\n\r\n\t\tif ( dracoExtA && dracoExtB ) {\r\n\r\n\t\t\tif ( dracoExtA.bufferView !== dracoExtB.bufferView ) return false;\r\n\r\n\t\t\treturn isObjectEqual( dracoExtA.attributes, dracoExtB.attributes );\r\n\r\n\t\t}\r\n\r\n\t\tif ( a.indices !== b.indices ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn isObjectEqual( a.attributes, b.attributes );\r\n\r\n\t}\r\n\r\n\tfunction isObjectEqual( a, b ) {\r\n\r\n\t\tif ( Object.keys( a ).length !== Object.keys( b ).length ) return false;\r\n\r\n\t\tfor ( var key in a ) {\r\n\r\n\t\t\tif ( a[ key ] !== b[ key ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tfunction isArrayEqual( a, b ) {\r\n\r\n\t\tif ( a.length !== b.length ) return false;\r\n\r\n\t\tfor ( var i = 0, il = a.length; i < il; i ++ ) {\r\n\r\n\t\t\tif ( a[ i ] !== b[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tfunction getCachedGeometry( cache, newPrimitive ) {\r\n\r\n\t\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar cached = cache[ i ];\r\n\r\n\t\t\tif ( isPrimitiveEqual( cached.primitive, newPrimitive ) ) return cached.promise;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction getCachedCombinedGeometry( cache, geometries ) {\r\n\r\n\t\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar cached = cache[ i ];\r\n\r\n\t\t\tif ( isArrayEqual( geometries, cached.baseGeometries ) ) return cached.geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction getCachedMultiPassGeometry( cache, geometry, primitives ) {\r\n\r\n\t\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar cached = cache[ i ];\r\n\r\n\t\t\tif ( geometry === cached.baseGeometry && isArrayEqual( primitives, cached.primitives ) ) return cached.geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction cloneBufferAttribute( attribute ) {\r\n\r\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tvar count = attribute.count;\r\n\t\t\tvar itemSize = attribute.itemSize;\r\n\t\t\tvar array = attribute.array.slice( 0, count * itemSize );\r\n\r\n\t\t\tfor ( var i = 0, j = 0; i < count; ++ i ) {\r\n\r\n\t\t\t\tarray[ j ++ ] = attribute.getX( i );\r\n\t\t\t\tif ( itemSize >= 2 ) array[ j ++ ] = attribute.getY( i );\r\n\t\t\t\tif ( itemSize >= 3 ) array[ j ++ ] = attribute.getZ( i );\r\n\t\t\t\tif ( itemSize >= 4 ) array[ j ++ ] = attribute.getW( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new BufferAttribute( array, itemSize, attribute.normalized );\r\n\r\n\t\t}\r\n\r\n\t\treturn attribute.clone();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if we can build a single Mesh with MultiMaterial from multiple primitives.\r\n\t * Returns true if all primitives use the same attributes/morphAttributes/mode\r\n\t * and also have index. Otherwise returns false.\r\n\t *\r\n\t * @param {Array<GLTF.Primitive>} primitives\r\n\t * @return {Boolean}\r\n\t */\r\n\tfunction isMultiPassGeometry( primitives ) {\r\n\r\n\t\tif ( primitives.length < 2 ) return false;\r\n\r\n\t\tvar primitive0 = primitives[ 0 ];\r\n\t\tvar targets0 = primitive0.targets || [];\r\n\r\n\t\tif ( primitive0.indices === undefined ) return false;\r\n\r\n\t\tfor ( var i = 1, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar primitive = primitives[ i ];\r\n\r\n\t\t\tif ( primitive0.mode !== primitive.mode ) return false;\r\n\t\t\tif ( primitive.indices === undefined ) return false;\r\n\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) return false;\r\n\t\t\tif ( ! isObjectEqual( primitive0.attributes, primitive.attributes ) ) return false;\r\n\r\n\t\t\tvar targets = primitive.targets || [];\r\n\r\n\t\t\tif ( targets0.length !== targets.length ) return false;\r\n\r\n\t\t\tfor ( var j = 0, jl = targets0.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tif ( ! isObjectEqual( targets0[ j ], targets[ j ] ) ) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\t/* GLTF PARSER */\r\n\r\n\tfunction GLTFParser( json, extensions, options ) {\r\n\r\n\t\tthis.json = json || {};\r\n\t\tthis.extensions = extensions || {};\r\n\t\tthis.options = options || {};\r\n\r\n\t\t// loader object cache\r\n\t\tthis.cache = new GLTFRegistry();\r\n\r\n\t\t// BufferGeometry caching\r\n\t\tthis.primitiveCache = [];\r\n\t\tthis.multiplePrimitivesCache = [];\r\n\t\tthis.multiPassGeometryCache = [];\r\n\r\n\t\tthis.textureLoader = new TextureLoader( this.options.manager );\r\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\r\n\r\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\r\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\r\n\r\n\t}\r\n\r\n\tGLTFParser.prototype.parse = function ( onLoad, onError ) {\r\n\r\n\t\tvar json = this.json;\r\n\r\n\t\t// Clear the loader cache\r\n\t\tthis.cache.removeAll();\r\n\r\n\t\t// Mark the special nodes/meshes in json for efficient parse\r\n\t\tthis.markDefs();\r\n\r\n\t\t// Fire the callback on complete\r\n\t\tthis.getMultiDependencies( [\r\n\r\n\t\t\t'scene',\r\n\t\t\t'animation',\r\n\t\t\t'camera'\r\n\r\n\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\tvar scenes = dependencies.scenes || [];\r\n\t\t\tvar scene = scenes[ json.scene || 0 ];\r\n\t\t\tvar animations = dependencies.animations || [];\r\n\t\t\tvar cameras = dependencies.cameras || [];\r\n\r\n\t\t\tonLoad( scene, scenes, cameras, animations, json );\r\n\r\n\t\t} ).catch( onError );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Marks the special nodes/meshes in json for efficient parse.\r\n\t */\r\n\tGLTFParser.prototype.markDefs = function () {\r\n\r\n\t\tvar nodeDefs = this.json.nodes || [];\r\n\t\tvar skinDefs = this.json.skins || [];\r\n\t\tvar meshDefs = this.json.meshes || [];\r\n\r\n\t\tvar meshReferences = {};\r\n\t\tvar meshUses = {};\r\n\r\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\r\n\t\t// Object3D. Use the skins' joint references to mark bones.\r\n\t\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\r\n\r\n\t\t\tvar joints = skinDefs[ skinIndex ].joints;\r\n\r\n\t\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Meshes can (and should) be reused by multiple nodes in a glTF asset. To\r\n\t\t// avoid having more than one Mesh with the same name, count\r\n\t\t// references and rename instances below.\r\n\t\t//\r\n\t\t// Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\r\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\r\n\r\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\r\n\r\n\t\t\tif ( nodeDef.mesh !== undefined ) {\r\n\r\n\t\t\t\tif ( meshReferences[ nodeDef.mesh ] === undefined ) {\r\n\r\n\t\t\t\t\tmeshReferences[ nodeDef.mesh ] = meshUses[ nodeDef.mesh ] = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmeshReferences[ nodeDef.mesh ] ++;\r\n\r\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\r\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\r\n\t\t\t\t// to mark SkinnedMesh if node has skin.\r\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\r\n\r\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.json.meshReferences = meshReferences;\r\n\t\tthis.json.meshUses = meshUses;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Requests the specified dependency asynchronously, with caching.\r\n\t * @param {string} type\r\n\t * @param {number} index\r\n\t * @return {Promise<Object3D|Material|Texture|AnimationClip|ArrayBuffer|Object>}\r\n\t */\r\n\tGLTFParser.prototype.getDependency = function ( type, index ) {\r\n\r\n\t\tvar cacheKey = type + ':' + index;\r\n\t\tvar dependency = this.cache.get( cacheKey );\r\n\r\n\t\tif ( ! dependency ) {\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase 'scene':\r\n\t\t\t\t\tdependency = this.loadScene( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'node':\r\n\t\t\t\t\tdependency = this.loadNode( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'mesh':\r\n\t\t\t\t\tdependency = this.loadMesh( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'accessor':\r\n\t\t\t\t\tdependency = this.loadAccessor( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bufferView':\r\n\t\t\t\t\tdependency = this.loadBufferView( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'buffer':\r\n\t\t\t\t\tdependency = this.loadBuffer( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'material':\r\n\t\t\t\t\tdependency = this.loadMaterial( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'texture':\r\n\t\t\t\t\tdependency = this.loadTexture( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'skin':\r\n\t\t\t\t\tdependency = this.loadSkin( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'animation':\r\n\t\t\t\t\tdependency = this.loadAnimation( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'camera':\r\n\t\t\t\t\tdependency = this.loadCamera( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'light':\r\n\t\t\t\t\tdependency = this.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].loadLight( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.cache.add( cacheKey, dependency );\r\n\r\n\t\t}\r\n\r\n\t\treturn dependency;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Requests all dependencies of the specified type asynchronously, with caching.\r\n\t * @param {string} type\r\n\t * @return {Promise<Array<Object>>}\r\n\t */\r\n\tGLTFParser.prototype.getDependencies = function ( type ) {\r\n\r\n\t\tvar dependencies = this.cache.get( type );\r\n\r\n\t\tif ( ! dependencies ) {\r\n\r\n\t\t\tvar parser = this;\r\n\t\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\r\n\r\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\r\n\r\n\t\t\t\treturn parser.getDependency( type, index );\r\n\r\n\t\t\t} ) );\r\n\r\n\t\t\tthis.cache.add( type, dependencies );\r\n\r\n\t\t}\r\n\r\n\t\treturn dependencies;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Requests all multiple dependencies of the specified types asynchronously, with caching.\r\n\t * @param {Array<string>} types\r\n\t * @return {Promise<Object<Array<Object>>>}\r\n\t */\r\n\tGLTFParser.prototype.getMultiDependencies = function ( types ) {\r\n\r\n\t\tvar results = {};\r\n\t\tvar pending = [];\r\n\r\n\t\tfor ( var i = 0, il = types.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar type = types[ i ];\r\n\t\t\tvar value = this.getDependencies( type );\r\n\r\n\t\t\t// TODO: Error-prone use of a callback inside a loop.\r\n\t\t\tvalue = value.then( function ( key, value ) {\r\n\r\n\t\t\t\tresults[ key ] = value;\r\n\r\n\t\t\t}.bind( this, type + ( type === 'mesh' ? 'es' : 's' ) ) );\r\n\r\n\t\t\tpending.push( value );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending ).then( function () {\r\n\r\n\t\t\treturn results;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\r\n\t * @param {number} bufferIndex\r\n\t * @return {Promise<ArrayBuffer>}\r\n\t */\r\n\tGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\r\n\r\n\t\tvar bufferDef = this.json.buffers[ bufferIndex ];\r\n\t\tvar loader = this.fileLoader;\r\n\r\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\t// If present, GLB container is required to be the first buffer.\r\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\r\n\r\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\r\n\r\n\t\t}\r\n\r\n\t\tvar options = this.options;\r\n\r\n\t\treturn new Promise( function ( resolve, reject ) {\r\n\r\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\r\n\r\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\r\n\t * @param {number} bufferViewIndex\r\n\t * @return {Promise<ArrayBuffer>}\r\n\t */\r\n\tGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\r\n\r\n\t\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\r\n\r\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\r\n\r\n\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\r\n\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\r\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\r\n\t * @param {number} accessorIndex\r\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\r\n\t */\r\n\tGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar json = this.json;\r\n\r\n\t\tvar accessorDef = this.json.accessors[ accessorIndex ];\r\n\r\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\r\n\r\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\r\n\t\t\t// information about attributes coming from another source (e.g. Draco\r\n\t\t\t// compression extension).\r\n\t\t\treturn Promise.resolve( null );\r\n\r\n\t\t}\r\n\r\n\t\tvar pendingBufferViews = [];\r\n\r\n\t\tif ( accessorDef.bufferView !== undefined ) {\r\n\r\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tpendingBufferViews.push( null );\r\n\r\n\t\t}\r\n\r\n\t\tif ( accessorDef.sparse !== undefined ) {\r\n\r\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\r\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\r\n\r\n\t\t\tvar bufferView = bufferViews[ 0 ];\r\n\r\n\t\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\r\n\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\r\n\r\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\r\n\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\r\n\t\t\tvar itemBytes = elementBytes * itemSize;\r\n\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\r\n\t\t\tvar byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\r\n\t\t\tvar normalized = accessorDef.normalized === true;\r\n\t\t\tvar array, bufferAttribute;\r\n\r\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\r\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\r\n\r\n\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType;\r\n\t\t\t\tvar ib = parser.cache.get( ibCacheKey );\r\n\r\n\t\t\t\tif ( ! ib ) {\r\n\r\n\t\t\t\t\t// Use the full buffer if it's interleaved.\r\n\t\t\t\t\tarray = new TypedArray( bufferView );\r\n\r\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\r\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\r\n\r\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, byteOffset / elementBytes, normalized );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( bufferView === null ) {\r\n\r\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\r\n\t\t\tif ( accessorDef.sparse !== undefined ) {\r\n\r\n\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\r\n\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\r\n\r\n\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\r\n\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\r\n\r\n\t\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\r\n\t\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\r\n\r\n\t\t\t\tif ( bufferView !== null ) {\r\n\r\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\r\n\t\t\t\t\tbufferAttribute.setArray( bufferAttribute.array.slice() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar index = sparseIndices[ i ];\r\n\r\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\r\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\r\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\r\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\r\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn bufferAttribute;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\r\n\t * @param {number} textureIndex\r\n\t * @return {Promise<Texture>}\r\n\t */\r\n\tGLTFParser.prototype.loadTexture = function ( textureIndex ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar json = this.json;\r\n\t\tvar options = this.options;\r\n\t\tvar textureLoader = this.textureLoader;\r\n\r\n\t\tvar URL = window.URL || window.webkitURL;\r\n\r\n\t\tvar textureDef = json.textures[ textureIndex ];\r\n\r\n\t\tvar textureExtensions = textureDef.extensions || {};\r\n\r\n\t\tvar source;\r\n\r\n\t\tif ( textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\r\n\r\n\t\t\tsource = json.images[ textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].source ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\tsource = json.images[ textureDef.source ];\r\n\r\n\t\t}\r\n\r\n\t\tvar sourceURI = source.uri;\r\n\t\tvar isObjectURL = false;\r\n\r\n\t\tif ( source.bufferView !== undefined ) {\r\n\r\n\t\t\t// Load binary image data from bufferView, if provided.\r\n\r\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\r\n\r\n\t\t\t\tisObjectURL = true;\r\n\t\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\r\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\r\n\t\t\t\treturn sourceURI;\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\r\n\r\n\t\t\t// Load Texture resource.\r\n\r\n\t\t\tvar loader = Loader.Handlers.get( sourceURI );\r\n\r\n\t\t\tif ( ! loader ) {\r\n\r\n\t\t\t\tloader = textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ]\r\n\t\t\t\t\t? parser.extensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].ddsLoader\r\n\t\t\t\t\t: textureLoader;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new Promise( function ( resolve, reject ) {\r\n\r\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), resolve, undefined, reject );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} ).then( function ( texture ) {\r\n\r\n\t\t\t// Clean up resources and configure Texture.\r\n\r\n\t\t\tif ( isObjectURL === true ) {\r\n\r\n\t\t\t\tURL.revokeObjectURL( sourceURI );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.flipY = false;\r\n\r\n\t\t\tif ( textureDef.name !== undefined ) texture.name = textureDef.name;\r\n\r\n\t\t\t// Ignore unknown mime types, like DDS files.\r\n\t\t\tif ( source.mimeType in MIME_TYPE_FORMATS ) {\r\n\r\n\t\t\t\ttexture.format = MIME_TYPE_FORMATS[ source.mimeType ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar samplers = json.samplers || {};\r\n\t\t\tvar sampler = samplers[ textureDef.sampler ] || {};\r\n\r\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\r\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipMapLinearFilter;\r\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\r\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\r\n\r\n\t\t\treturn texture;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Asynchronously assigns a texture to the given material parameters.\r\n\t * @param {Object} materialParams\r\n\t * @param {string} mapName\r\n\t * @param {Object} mapDef\r\n\t * @return {Promise}\r\n\t */\r\n\tGLTFParser.prototype.assignTexture = function ( materialParams, mapName, mapDef ) {\r\n\r\n\t\tvar parser = this;\r\n\r\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\r\n\r\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\r\n\r\n\t\t\t\tvar transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\r\n\r\n\t\t\t\tif ( transform ) {\r\n\r\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterialParams[ mapName ] = texture;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\r\n\t * @param {number} materialIndex\r\n\t * @return {Promise<Material>}\r\n\t */\r\n\tGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar json = this.json;\r\n\t\tvar extensions = this.extensions;\r\n\t\tvar materialDef = json.materials[ materialIndex ];\r\n\r\n\t\tvar materialType;\r\n\t\tvar materialParams = {};\r\n\t\tvar materialExtensions = materialDef.extensions || {};\r\n\r\n\t\tvar pending = [];\r\n\r\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\r\n\r\n\t\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\r\n\t\t\tmaterialType = sgExtension.getMaterialType( materialDef );\r\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\r\n\r\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\r\n\r\n\t\t\tvar kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\r\n\t\t\tmaterialType = kmuExtension.getMaterialType( materialDef );\r\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Specification:\r\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\r\n\r\n\t\t\tmaterialType = MeshStandardMaterial;\r\n\r\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\r\n\r\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\r\n\t\t\tmaterialParams.opacity = 1.0;\r\n\r\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\r\n\r\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\r\n\r\n\t\t\t\tmaterialParams.color.fromArray( array );\r\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\r\n\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\r\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\r\n\r\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\r\n\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.doubleSided === true ) {\r\n\r\n\t\t\tmaterialParams.side = DoubleSide;\r\n\r\n\t\t}\r\n\r\n\t\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\r\n\r\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\r\n\r\n\t\t\tmaterialParams.transparent = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmaterialParams.transparent = false;\r\n\r\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\r\n\r\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\r\n\r\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\r\n\r\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\r\n\r\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\r\n\r\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\r\n\r\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\r\n\r\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending ).then( function () {\r\n\r\n\t\t\tvar material;\r\n\r\n\t\t\tif ( materialType === ShaderMaterial ) {\r\n\r\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterial = new materialType( materialParams );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( materialDef.name !== undefined ) material.name = materialDef.name;\r\n\r\n\t\t\t// Normal map textures use OpenGL conventions:\r\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#materialnormaltexture\r\n\t\t\tif ( material.normalScale ) {\r\n\r\n\t\t\t\tmaterial.normalScale.y = - material.normalScale.y;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\r\n\t\t\tif ( material.map ) material.map.encoding = sRGBEncoding;\r\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = sRGBEncoding;\r\n\t\t\tif ( material.specularMap ) material.specularMap.encoding = sRGBEncoding;\r\n\r\n\t\t\tassignExtrasToUserData( material, materialDef );\r\n\r\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\r\n\r\n\t\t\treturn material;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * @param {BufferGeometry} geometry\r\n\t * @param {GLTF.Primitive} primitiveDef\r\n\t * @param {GLTFParser} parser\r\n\t * @return {Promise<BufferGeometry>}\r\n\t */\r\n\tfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\r\n\r\n\t\tvar attributes = primitiveDef.attributes;\r\n\r\n\t\tvar pending = [];\r\n\r\n\t\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\r\n\r\n\t\t\treturn parser.getDependency( 'accessor', accessorIndex )\r\n\t\t\t\t.then( function ( accessor ) {\r\n\r\n\t\t\t\t\tgeometry.addAttribute( attributeName, accessor );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var gltfAttributeName in attributes ) {\r\n\r\n\t\t\tvar threeAttributeName = ATTRIBUTES[ gltfAttributeName ];\r\n\r\n\t\t\tif ( ! threeAttributeName ) continue;\r\n\r\n\t\t\t// Skip attributes already provided by e.g. Draco extension.\r\n\t\t\tif ( threeAttributeName in geometry.attributes ) continue;\r\n\r\n\t\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\r\n\r\n\t\t\tvar accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\r\n\r\n\t\t\t\tgeometry.setIndex( accessor );\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tpending.push( accessor );\r\n\r\n\t\t}\r\n\r\n\t\tassignExtrasToUserData( geometry, primitiveDef );\r\n\r\n\t\treturn Promise.all( pending ).then( function () {\r\n\r\n\t\t\treturn primitiveDef.targets !== undefined\r\n\t\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\r\n\t\t\t\t: geometry;\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\r\n\t *\r\n\t * Creates BufferGeometries from primitives.\r\n\t * If we can build a single BufferGeometry with .groups from multiple primitives, returns one BufferGeometry.\r\n\t * Otherwise, returns BufferGeometries without .groups as many as primitives.\r\n\t *\r\n\t * @param {Array<GLTF.Primitive>} primitives\r\n\t * @return {Promise<Array<BufferGeometry>>}\r\n\t */\r\n\tGLTFParser.prototype.loadGeometries = function ( primitives ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar extensions = this.extensions;\r\n\t\tvar cache = this.primitiveCache;\r\n\r\n\t\tvar isMultiPass = isMultiPassGeometry( primitives );\r\n\t\tvar originalPrimitives;\r\n\r\n\t\tif ( isMultiPass ) {\r\n\r\n\t\t\toriginalPrimitives = primitives; // save original primitives and use later\r\n\r\n\t\t\t// We build a single BufferGeometry with .groups from multiple primitives\r\n\t\t\t// because all primitives share the same attributes/morph/mode and have indices.\r\n\r\n\t\t\tprimitives = [ primitives[ 0 ] ];\r\n\r\n\t\t\t// Sets .groups and combined indices to a geometry later in this method.\r\n\r\n\t\t}\r\n\r\n\t\tfunction createDracoPrimitive( primitive ) {\r\n\r\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\r\n\t\t\t\t.decodePrimitive( primitive, parser )\r\n\t\t\t\t.then( function ( geometry ) {\r\n\r\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tvar pending = [];\r\n\r\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar primitive = primitives[ i ];\r\n\r\n\t\t\t// See if we've already created this geometry\r\n\t\t\tvar cached = getCachedGeometry( cache, primitive );\r\n\r\n\t\t\tif ( cached ) {\r\n\r\n\t\t\t\t// Use the cached geometry if it exists\r\n\t\t\t\tpending.push( cached );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar geometryPromise;\r\n\r\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\r\n\r\n\t\t\t\t\t// Use DRACO geometry if available\r\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Otherwise create a new geometry\r\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Cache this geometry\r\n\t\t\t\tcache.push( { primitive: primitive, promise: geometryPromise } );\r\n\r\n\t\t\t\tpending.push( geometryPromise );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending ).then( function ( geometries ) {\r\n\r\n\t\t\tif ( isMultiPass ) {\r\n\r\n\t\t\t\tvar baseGeometry = geometries[ 0 ];\r\n\r\n\t\t\t\t// See if we've already created this combined geometry\r\n\t\t\t\tvar cache = parser.multiPassGeometryCache;\r\n\t\t\t\tvar cached = getCachedMultiPassGeometry( cache, baseGeometry, originalPrimitives );\r\n\r\n\t\t\t\tif ( cached !== null ) return [ cached.geometry ];\r\n\r\n\t\t\t\t// Cloning geometry because of index override.\r\n\t\t\t\t// Attributes can be reused so cloning by myself here.\r\n\t\t\t\tvar geometry = new BufferGeometry();\r\n\r\n\t\t\t\tgeometry.name = baseGeometry.name;\r\n\t\t\t\tgeometry.userData = baseGeometry.userData;\r\n\r\n\t\t\t\tfor ( var key in baseGeometry.attributes ) geometry.addAttribute( key, baseGeometry.attributes[ key ] );\r\n\t\t\t\tfor ( var key in baseGeometry.morphAttributes ) geometry.morphAttributes[ key ] = baseGeometry.morphAttributes[ key ];\r\n\r\n\t\t\t\tvar pendingIndices = [];\r\n\r\n\t\t\t\tfor ( var i = 0, il = originalPrimitives.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tpendingIndices.push( parser.getDependency( 'accessor', originalPrimitives[ i ].indices ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn Promise.all( pendingIndices ).then( function ( accessors ) {\r\n\r\n\t\t\t\t\tvar indices = [];\r\n\t\t\t\t\tvar offset = 0;\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = originalPrimitives.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar accessor = accessors[ i ];\r\n\r\n\t\t\t\t\t\tfor ( var j = 0, jl = accessor.count; j < jl; j ++ ) indices.push( accessor.array[ j ] );\r\n\r\n\t\t\t\t\t\tgeometry.addGroup( offset, accessor.count, i );\r\n\r\n\t\t\t\t\t\toffset += accessor.count;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.setIndex( indices );\r\n\r\n\t\t\t\t\tcache.push( { geometry: geometry, baseGeometry: baseGeometry, primitives: originalPrimitives } );\r\n\r\n\t\t\t\t\treturn [ geometry ];\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t} else if ( geometries.length > 1 && THREE.BufferGeometryUtils !== undefined ) {\r\n\r\n\t\t\t\t// Tries to merge geometries with BufferGeometryUtils if possible\r\n\r\n\t\t\t\tfor ( var i = 1, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t// can't merge if draw mode is different\r\n\t\t\t\t\tif ( primitives[ 0 ].mode !== primitives[ i ].mode ) return geometries;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// See if we've already created this combined geometry\r\n\t\t\t\tvar cache = parser.multiplePrimitivesCache;\r\n\t\t\t\tvar cached = getCachedCombinedGeometry( cache, geometries );\r\n\r\n\t\t\t\tif ( cached ) {\r\n\r\n\t\t\t\t\tif ( cached.geometry !== null ) return [ cached.geometry ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar geometry = THREE.BufferGeometryUtils.mergeBufferGeometries( geometries, true );\r\n\r\n\t\t\t\t\tcache.push( { geometry: geometry, baseGeometries: geometries } );\r\n\r\n\t\t\t\t\tif ( geometry !== null ) return [ geometry ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn geometries;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\r\n\t * @param {number} meshIndex\r\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\r\n\t */\r\n\tGLTFParser.prototype.loadMesh = function ( meshIndex ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar json = this.json;\r\n\t\tvar extensions = this.extensions;\r\n\r\n\t\tvar meshDef = json.meshes[ meshIndex ];\r\n\t\tvar primitives = meshDef.primitives;\r\n\r\n\t\tvar pending = [];\r\n\r\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar material = primitives[ i ].material === undefined\r\n\t\t\t\t? createDefaultMaterial()\r\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\r\n\r\n\t\t\tpending.push( material );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending ).then( function ( originalMaterials ) {\r\n\r\n\t\t\treturn parser.loadGeometries( primitives ).then( function ( geometries ) {\r\n\r\n\t\t\t\tvar isMultiMaterial = geometries.length === 1 && geometries[ 0 ].groups.length > 0;\r\n\r\n\t\t\t\tvar meshes = [];\r\n\r\n\t\t\t\tfor ( var i = 0, il = geometries.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar geometry = geometries[ i ];\r\n\t\t\t\t\tvar primitive = primitives[ i ];\r\n\r\n\t\t\t\t\t// 1. create Mesh\r\n\r\n\t\t\t\t\tvar mesh;\r\n\r\n\t\t\t\t\tvar material = isMultiMaterial ? originalMaterials : originalMaterials[ i ];\r\n\r\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\r\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\r\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\r\n\t\t\t\t\t\tprimitive.mode === undefined ) {\r\n\r\n\t\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See .markDefs()\r\n\t\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\r\n\t\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\r\n\t\t\t\t\t\t\t: new Mesh( geometry, material );\r\n\r\n\t\t\t\t\t\tif ( mesh.isSkinnedMesh === true ) mesh.normalizeSkinWeights(); // #15319\r\n\r\n\t\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\r\n\r\n\t\t\t\t\t\t\tmesh.drawMode = TriangleStripDrawMode;\r\n\r\n\t\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\r\n\r\n\t\t\t\t\t\t\tmesh.drawMode = TriangleFanDrawMode;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\r\n\r\n\t\t\t\t\t\tmesh = new LineSegments( geometry, material );\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\r\n\r\n\t\t\t\t\t\tmesh = new Line( geometry, material );\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\r\n\r\n\t\t\t\t\t\tmesh = new LineLoop( geometry, material );\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\r\n\r\n\t\t\t\t\t\tmesh = new Points( geometry, material );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\r\n\r\n\t\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmesh.name = meshDef.name || ( 'mesh_' + meshIndex );\r\n\r\n\t\t\t\t\tif ( geometries.length > 1 ) mesh.name += '_' + i;\r\n\r\n\t\t\t\t\tassignExtrasToUserData( mesh, meshDef );\r\n\r\n\t\t\t\t\tmeshes.push( mesh );\r\n\r\n\t\t\t\t\t// 2. update Material depending on Mesh and BufferGeometry\r\n\r\n\t\t\t\t\tvar materials = isMultiMaterial ? mesh.material : [ mesh.material ];\r\n\r\n\t\t\t\t\tvar useVertexColors = geometry.attributes.color !== undefined;\r\n\t\t\t\t\tvar useFlatShading = geometry.attributes.normal === undefined;\r\n\t\t\t\t\tvar useSkinning = mesh.isSkinnedMesh === true;\r\n\t\t\t\t\tvar useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\r\n\t\t\t\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = materials.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar material = materials[ j ];\r\n\r\n\t\t\t\t\t\tif ( mesh.isPoints ) {\r\n\r\n\t\t\t\t\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\r\n\r\n\t\t\t\t\t\t\tvar pointsMaterial = parser.cache.get( cacheKey );\r\n\r\n\t\t\t\t\t\t\tif ( ! pointsMaterial ) {\r\n\r\n\t\t\t\t\t\t\t\tpointsMaterial = new PointsMaterial();\r\n\t\t\t\t\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\r\n\t\t\t\t\t\t\t\tpointsMaterial.color.copy( material.color );\r\n\t\t\t\t\t\t\t\tpointsMaterial.map = material.map;\r\n\t\t\t\t\t\t\t\tpointsMaterial.lights = false; // PointsMaterial doesn't support lights yet\r\n\r\n\t\t\t\t\t\t\t\tparser.cache.add( cacheKey, pointsMaterial );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmaterial = pointsMaterial;\r\n\r\n\t\t\t\t\t\t} else if ( mesh.isLine ) {\r\n\r\n\t\t\t\t\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\r\n\r\n\t\t\t\t\t\t\tvar lineMaterial = parser.cache.get( cacheKey );\r\n\r\n\t\t\t\t\t\t\tif ( ! lineMaterial ) {\r\n\r\n\t\t\t\t\t\t\t\tlineMaterial = new LineBasicMaterial();\r\n\t\t\t\t\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\r\n\t\t\t\t\t\t\t\tlineMaterial.color.copy( material.color );\r\n\t\t\t\t\t\t\t\tlineMaterial.lights = false; // LineBasicMaterial doesn't support lights yet\r\n\r\n\t\t\t\t\t\t\t\tparser.cache.add( cacheKey, lineMaterial );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmaterial = lineMaterial;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Clone the material if it will be modified\r\n\t\t\t\t\t\tif ( useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\r\n\r\n\t\t\t\t\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\r\n\r\n\t\t\t\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\r\n\t\t\t\t\t\t\tif ( useSkinning ) cacheKey += 'skinning:';\r\n\t\t\t\t\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\r\n\t\t\t\t\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\r\n\t\t\t\t\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\r\n\t\t\t\t\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\r\n\r\n\t\t\t\t\t\t\tvar cachedMaterial = parser.cache.get( cacheKey );\r\n\r\n\t\t\t\t\t\t\tif ( ! cachedMaterial ) {\r\n\r\n\t\t\t\t\t\t\t\tcachedMaterial = material.isGLTFSpecularGlossinessMaterial\r\n\t\t\t\t\t\t\t\t\t? extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].cloneMaterial( material )\r\n\t\t\t\t\t\t\t\t\t: material.clone();\r\n\r\n\t\t\t\t\t\t\t\tif ( useSkinning ) cachedMaterial.skinning = true;\r\n\t\t\t\t\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = VertexColors;\r\n\t\t\t\t\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\r\n\t\t\t\t\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\r\n\t\t\t\t\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\r\n\r\n\t\t\t\t\t\t\t\tparser.cache.add( cacheKey, cachedMaterial );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmaterial = cachedMaterial;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tmaterials[ j ] = material;\r\n\r\n\t\t\t\t\t\t// workarounds for mesh and geometry\r\n\r\n\t\t\t\t\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\r\n\r\n\t\t\t\t\t\t\tconsole.log( 'THREE.GLTFLoader: Duplicating UVs to support aoMap.' );\r\n\t\t\t\t\t\t\tgeometry.addAttribute( 'uv2', new BufferAttribute( geometry.attributes.uv.array, 2 ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) {\r\n\r\n\t\t\t\t\t\t\t// for GLTFSpecularGlossinessMaterial(ShaderMaterial) uniforms runtime update\r\n\t\t\t\t\t\t\tmesh.onBeforeRender = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].refreshUniforms;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmesh.material = isMultiMaterial ? materials : materials[ 0 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( meshes.length === 1 ) {\r\n\r\n\t\t\t\t\treturn meshes[ 0 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar group = new Group();\r\n\r\n\t\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tgroup.add( meshes[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn group;\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\r\n\t * @param {number} cameraIndex\r\n\t * @return {Promise<Camera>}\r\n\t */\r\n\tGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\r\n\r\n\t\tvar camera;\r\n\t\tvar cameraDef = this.json.cameras[ cameraIndex ];\r\n\t\tvar params = cameraDef[ cameraDef.type ];\r\n\r\n\t\tif ( ! params ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( cameraDef.type === 'perspective' ) {\r\n\r\n\t\t\tcamera = new PerspectiveCamera( Math.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\r\n\r\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\r\n\r\n\t\t\tcamera = new OrthographicCamera( params.xmag / - 2, params.xmag / 2, params.ymag / 2, params.ymag / - 2, params.znear, params.zfar );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cameraDef.name !== undefined ) camera.name = cameraDef.name;\r\n\r\n\t\tassignExtrasToUserData( camera, cameraDef );\r\n\r\n\t\treturn Promise.resolve( camera );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\r\n\t * @param {number} skinIndex\r\n\t * @return {Promise<Object>}\r\n\t */\r\n\tGLTFParser.prototype.loadSkin = function ( skinIndex ) {\r\n\r\n\t\tvar skinDef = this.json.skins[ skinIndex ];\r\n\r\n\t\tvar skinEntry = { joints: skinDef.joints };\r\n\r\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\r\n\r\n\t\t\treturn Promise.resolve( skinEntry );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\r\n\r\n\t\t\tskinEntry.inverseBindMatrices = accessor;\r\n\r\n\t\t\treturn skinEntry;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\r\n\t * @param {number} animationIndex\r\n\t * @return {Promise<AnimationClip>}\r\n\t */\r\n\tGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\r\n\r\n\t\tvar json = this.json;\r\n\r\n\t\tvar animationDef = json.animations[ animationIndex ];\r\n\r\n\t\tvar pendingNodes = [];\r\n\t\tvar pendingInputAccessors = [];\r\n\t\tvar pendingOutputAccessors = [];\r\n\t\tvar pendingSamplers = [];\r\n\t\tvar pendingTargets = [];\r\n\r\n\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar channel = animationDef.channels[ i ];\r\n\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\r\n\t\t\tvar target = channel.target;\r\n\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\r\n\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\r\n\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\r\n\r\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\r\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\r\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\r\n\t\t\tpendingSamplers.push( sampler );\r\n\t\t\tpendingTargets.push( target );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( [\r\n\r\n\t\t\tPromise.all( pendingNodes ),\r\n\t\t\tPromise.all( pendingInputAccessors ),\r\n\t\t\tPromise.all( pendingOutputAccessors ),\r\n\t\t\tPromise.all( pendingSamplers ),\r\n\t\t\tPromise.all( pendingTargets )\r\n\r\n\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\tvar nodes = dependencies[ 0 ];\r\n\t\t\tvar inputAccessors = dependencies[ 1 ];\r\n\t\t\tvar outputAccessors = dependencies[ 2 ];\r\n\t\t\tvar samplers = dependencies[ 3 ];\r\n\t\t\tvar targets = dependencies[ 4 ];\r\n\r\n\t\t\tvar tracks = [];\r\n\r\n\t\t\tfor ( var i = 0, il = nodes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar node = nodes[ i ];\r\n\t\t\t\tvar inputAccessor = inputAccessors[ i ];\r\n\t\t\t\tvar outputAccessor = outputAccessors[ i ];\r\n\t\t\t\tvar sampler = samplers[ i ];\r\n\t\t\t\tvar target = targets[ i ];\r\n\r\n\t\t\t\tif ( node === undefined ) continue;\r\n\r\n\t\t\t\tnode.updateMatrix();\r\n\t\t\t\tnode.matrixAutoUpdate = true;\r\n\r\n\t\t\t\tvar TypedKeyframeTrack;\r\n\r\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\r\n\r\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\r\n\r\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\r\n\r\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase PATH_PROPERTIES.position:\r\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\r\n\r\n\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\r\n\r\n\t\t\t\tvar targetNames = [];\r\n\r\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\r\n\r\n\t\t\t\t\t// node can be Group here but\r\n\t\t\t\t\t// PATH_PROPERTIES.weights(morphTargetInfluences) should be\r\n\t\t\t\t\t// the property of a mesh object under group.\r\n\r\n\t\t\t\t\tnode.traverse( function ( object ) {\r\n\r\n\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\r\n\r\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttargetNames.push( targetName );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// KeyframeTrack.optimize() will modify given 'times' and 'values'\r\n\t\t\t\t// buffers before creating a truncated copy to keep. Because buffers may\r\n\t\t\t\t// be reused by other tracks, make copies here.\r\n\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar track = new TypedKeyframeTrack(\r\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\r\n\t\t\t\t\t\tAnimationUtils.arraySlice( inputAccessor.array, 0 ),\r\n\t\t\t\t\t\tAnimationUtils.arraySlice( outputAccessor.array, 0 ),\r\n\t\t\t\t\t\tinterpolation\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\t// Here is the trick to enable custom interpolation.\r\n\t\t\t\t\t// Overrides .createInterpolant in a factory method which creates custom interpolation.\r\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\r\n\r\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\r\n\r\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\r\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\r\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\r\n\r\n\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\r\n\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t// Workaround, provide an alternate way to know if the interpolant type is cubis spline to track.\r\n\t\t\t\t\t\t// track.getInterpolation() doesn't return valid value for custom interpolant.\r\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttracks.push( track );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar name = animationDef.name !== undefined ? animationDef.name : 'animation_' + animationIndex;\r\n\r\n\t\t\treturn new AnimationClip( name, undefined, tracks );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\r\n\t * @param {number} nodeIndex\r\n\t * @return {Promise<Object3D>}\r\n\t */\r\n\tGLTFParser.prototype.loadNode = function ( nodeIndex ) {\r\n\r\n\t\tvar json = this.json;\r\n\t\tvar extensions = this.extensions;\r\n\t\tvar parser = this;\r\n\r\n\t\tvar meshReferences = json.meshReferences;\r\n\t\tvar meshUses = json.meshUses;\r\n\r\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\r\n\r\n\t\treturn ( function () {\r\n\r\n\t\t\t// .isBone isn't in glTF spec. See .markDefs\r\n\t\t\tif ( nodeDef.isBone === true ) {\r\n\r\n\t\t\t\treturn Promise.resolve( new Bone() );\r\n\r\n\t\t\t} else if ( nodeDef.mesh !== undefined ) {\r\n\r\n\t\t\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\r\n\r\n\t\t\t\t\tvar node;\r\n\r\n\t\t\t\t\tif ( meshReferences[ nodeDef.mesh ] > 1 ) {\r\n\r\n\t\t\t\t\t\tvar instanceNum = meshUses[ nodeDef.mesh ] ++;\r\n\r\n\t\t\t\t\t\tnode = mesh.clone();\r\n\t\t\t\t\t\tnode.name += '_instance_' + instanceNum;\r\n\r\n\t\t\t\t\t\t// onBeforeRender copy for Specular-Glossiness\r\n\t\t\t\t\t\tnode.onBeforeRender = mesh.onBeforeRender;\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, il = node.children.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tnode.children[ i ].name += '_instance_' + instanceNum;\r\n\t\t\t\t\t\t\tnode.children[ i ].onBeforeRender = mesh.children[ i ].onBeforeRender;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tnode = mesh;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// if weights are provided on the node, override weights on the mesh.\r\n\t\t\t\t\tif ( nodeDef.weights !== undefined ) {\r\n\r\n\t\t\t\t\t\tnode.traverse( function ( o ) {\r\n\r\n\t\t\t\t\t\t\tif ( ! o.isMesh ) return;\r\n\r\n\t\t\t\t\t\t\tfor ( var i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn node;\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t} else if ( nodeDef.camera !== undefined ) {\r\n\r\n\t\t\t\treturn parser.getDependency( 'camera', nodeDef.camera );\r\n\r\n\t\t\t} else if ( nodeDef.extensions\r\n\t\t\t\t&& nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ]\r\n\t\t\t\t&& nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].light !== undefined ) {\r\n\r\n\t\t\t\treturn parser.getDependency( 'light', nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].light );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn Promise.resolve( new Object3D() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}() ).then( function ( node ) {\r\n\r\n\t\t\tif ( nodeDef.name !== undefined ) {\r\n\r\n\t\t\t\tnode.name = PropertyBinding.sanitizeNodeName( nodeDef.name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tassignExtrasToUserData( node, nodeDef );\r\n\r\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\r\n\r\n\t\t\tif ( nodeDef.matrix !== undefined ) {\r\n\r\n\t\t\t\tvar matrix = new Matrix4();\r\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\r\n\t\t\t\tnode.applyMatrix( matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\r\n\r\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\r\n\r\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\r\n\r\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn node;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\r\n\t * @param {number} sceneIndex\r\n\t * @return {Promise<Scene>}\r\n\t */\r\n\tGLTFParser.prototype.loadScene = function () {\r\n\r\n\t\t// scene node hierachy builder\r\n\r\n\t\tfunction buildNodeHierachy( nodeId, parentObject, json, parser ) {\r\n\r\n\t\t\tvar nodeDef = json.nodes[ nodeId ];\r\n\r\n\t\t\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\r\n\r\n\t\t\t\tif ( nodeDef.skin === undefined ) return node;\r\n\r\n\t\t\t\t// build skeleton here as well\r\n\r\n\t\t\t\tvar skinEntry;\r\n\r\n\t\t\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\r\n\r\n\t\t\t\t\tskinEntry = skin;\r\n\r\n\t\t\t\t\tvar pendingJoints = [];\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn Promise.all( pendingJoints );\r\n\r\n\t\t\t\t} ).then( function ( jointNodes ) {\r\n\r\n\t\t\t\t\tvar meshes = node.isGroup === true ? node.children : [ node ];\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar mesh = meshes[ i ];\r\n\r\n\t\t\t\t\t\tvar bones = [];\r\n\t\t\t\t\t\tvar boneInverses = [];\r\n\r\n\t\t\t\t\t\tfor ( var j = 0, jl = jointNodes.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar jointNode = jointNodes[ j ];\r\n\r\n\t\t\t\t\t\t\tif ( jointNode ) {\r\n\r\n\t\t\t\t\t\t\t\tbones.push( jointNode );\r\n\r\n\t\t\t\t\t\t\t\tvar mat = new Matrix4();\r\n\r\n\t\t\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\r\n\r\n\t\t\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tboneInverses.push( mat );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tmesh.bind( new Skeleton( bones, boneInverses ), mesh.matrixWorld );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn node;\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t} ).then( function ( node ) {\r\n\r\n\t\t\t\t// build node hierachy\r\n\r\n\t\t\t\tparentObject.add( node );\r\n\r\n\t\t\t\tvar pending = [];\r\n\r\n\t\t\t\tif ( nodeDef.children ) {\r\n\r\n\t\t\t\t\tvar children = nodeDef.children;\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar child = children[ i ];\r\n\t\t\t\t\t\tpending.push( buildNodeHierachy( child, node, json, parser ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn Promise.all( pending );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn function loadScene( sceneIndex ) {\r\n\r\n\t\t\tvar json = this.json;\r\n\t\t\tvar extensions = this.extensions;\r\n\t\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\r\n\t\t\tvar parser = this;\r\n\r\n\t\t\tvar scene = new Scene();\r\n\t\t\tif ( sceneDef.name !== undefined ) scene.name = sceneDef.name;\r\n\r\n\t\t\tassignExtrasToUserData( scene, sceneDef );\r\n\r\n\t\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\r\n\r\n\t\t\tvar nodeIds = sceneDef.nodes || [];\r\n\r\n\t\t\tvar pending = [];\r\n\r\n\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tpending.push( buildNodeHierachy( nodeIds[ i ], scene, json, parser ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn Promise.all( pending ).then( function () {\r\n\r\n\t\t\t\treturn scene;\r\n\r\n\t\t\t} );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\treturn GLTFLoader;\r\n\r\n} )();\r\n\r\nexport { GLTFLoader };\r\n","import { Color } from './vendor/three/three.module.js';\r\nimport App from './vendor/App.module.js';\r\n\r\nimport initLights from './lights.js';\r\nimport loadModels from './models.js';\r\n\r\nexport default function initScene() {\r\n\r\n  const app = new App( '#container' );\r\n\r\n  app.init();\r\n\r\n  app.scene.background = new Color( 0x8FBCD4 );\r\n  app.camera.position.set( -2.5, 2.5, 7.5 );\r\n\r\n  initLights( app.scene );\r\n\r\n  loadModels( app.scene );\r\n\r\n  app.start();\r\n\r\n}\r\n","import {\r\n  AnimationMixer,\r\n  Vector3,\r\n} from './vendor/three/three.module.js';\r\n\r\nimport { GLTFLoader } from './vendor/three/loaders/GLTFLoader.module.js';\r\n\r\nimport Parrot from '../models/Parrot.glb';\r\nimport Stork from '../models/Stork.glb';\r\nimport Flamingo from '../models/Flamingo.glb';\r\n\r\n\r\nconst onLoad = ( gltf, scene, position ) => {\r\n\r\n  const model = gltf.scene.children[ 0 ];\r\n\r\n  model.position.copy( position );\r\n\r\n  if ( gltf.animations[ 0 ] ) {\r\n\r\n    const animation = gltf.animations[ 0 ];\r\n    const mixer = new AnimationMixer( model );\r\n\r\n    model.userData.onUpdate = ( delta ) => {\r\n\r\n      mixer.update( delta );\r\n\r\n    };\r\n\r\n    const action = mixer.clipAction( animation );\r\n    action.play();\r\n\r\n  }\r\n\r\n  scene.add( model );\r\n\r\n};\r\n\r\nexport default function loadModels( scene ) {\r\n\r\n  const loader = new GLTFLoader();\r\n\r\n  const onError = ( errorMessage ) => { console.log( errorMessage ); };\r\n\r\n  // load the first model. Each model is loaded asynchronously,\r\n  // so don't make any assumption about which one will finish loading first\r\n  const parrotPosition = new Vector3( 0, 0, 2.5 );\r\n  loader.load( Parrot, gltf => onLoad( gltf, scene, parrotPosition ), null, onError );\r\n\r\n  const flamingoPosition = new Vector3( 7.5, 0, -10 );\r\n  loader.load( Flamingo, gltf => onLoad( gltf, scene, flamingoPosition ), null, onError );\r\n\r\n  const storkPosition = new Vector3( 0, -2.5, -10 );\r\n  loader.load( Stork, gltf => onLoad( gltf, scene, storkPosition ), null, onError );\r\n\r\n}\r\n","import {\r\n  AmbientLight,\r\n  DirectionalLight,\r\n} from './vendor/three/three.module.js';\r\n\r\nexport default function initLights( scene ) {\r\n\r\n  const ambientLight = new AmbientLight( 0xffffff, 1 );\r\n\r\n  const frontLight = new DirectionalLight( 0xffffff, 1 );\r\n  frontLight.position.set( 10, 10, 10 );\r\n\r\n  const backLight = new DirectionalLight( 0xffffff, 1 );\r\n  backLight.position.set( -10, 10, -10 );\r\n\r\n  scene.add( ambientLight, frontLight, backLight );\r\n\r\n  return { ambientLight, frontLight, backLight };\r\n\r\n}\r\n"],"sourceRoot":""}